<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>HTML::TokeParser - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","HTML-Parser",3]);
    _gaq.push(["_setCustomVar",5,"Release","HTML-Parser-3.69",3]);
    _gaq.push(["_setCustomVar",3,"Module","HTML::TokeParser",3]);
    _gaq.push(["_setCustomVar",1,"Author","GAAS",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?HTML::TokeParser">permalink</a></div>
  <a href="/~gaas/">Gisle Aas</a> &gt;
  <a href="/~gaas/HTML-Parser-3.69/">HTML-Parser-3.69</a> &gt;
  HTML::TokeParser
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/80ccd89a65d9faf08c2fb6be2991ba57?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/G/GA/GAAS/HTML-Parser-3.69.tar.gz">HTML-Parser-3.69.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=HTML%3A%3ATokeParser;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~GAAS/HTML-Parser-3.69/lib/HTML/TokeParser.pm">Annotate this POD
(1)
</a></p>
<div class=box style='width:150px; float: right'>
<h1 class=t5>Related Modules</h1>
<div style="margin:2px">
<a href="/perldoc?HTML%3A%3AParser">HTML::Parser</a><br>
<a href="/perldoc?LWP%3A%3ASimple">LWP::Simple</a><br>
<a href="/perldoc?WWW%3A%3AMechanize">WWW::Mechanize</a><br>
<a href="/perldoc?LWP%3A%3AUserAgent">LWP::UserAgent</a><br>
<a href="/perldoc?Data%3A%3ADumper">Data::Dumper</a><br>
<a href="/perldoc?File%3A%3AFind">File::Find</a><br>
<a href="/perldoc?HTML%3A%3ALinkExtor">HTML::LinkExtor</a><br>
<a href="/perldoc?XML%3A%3ASimple">XML::Simple</a><br>
<a href="/perldoc?XML%3A%3AParser">XML::Parser</a><br>
<a href="/perldoc?XML%3A%3ATwig">XML::Twig</a><br>
<small>
<a href="http://perlmonks.org/?node=cpan+module+search&pivot=1&module=HTML%3A%3ATokeParser">more...</a><br>
By <a href="http://perlmonks.org/">perlmonks.org</a></small>
</div>
</div>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 5</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 6</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=HTML-Parser">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  3.69 &nbsp;
<span class="noprint">
  <a href="/src/GAAS/HTML-Parser-3.69/lib/HTML/TokeParser.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#EXAMPLES'>EXAMPLES</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>HTML::TokeParser - Alternative HTML::Parser interface</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl"> require HTML::TokeParser;
 $p = HTML::TokeParser-&#62;new(&#34;index.html&#34;) ||
      die &#34;Can&#39;t open: $!&#34;;
 $p-&#62;empty_element_tags(1);  # configure its behaviour

 while (my $token = $p-&#62;get_token) {
     #...
 }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>The <code>HTML::TokeParser</code> is an alternative interface to the <code>HTML::Parser</code> class. It is an <code>HTML::PullParser</code> subclass with a predeclared set of token types. If you wish the tokens to be reported differently you probably want to use the <code>HTML::PullParser</code> directly.</p>

<p>The following methods are available:</p>

<dl>
<dt><a name='p'></a><a name="$p_=_HTML::TokeParser-&#62;new(_$filename,_%opt_);"
>$p = HTML::TokeParser-&#62;new( $filename, %opt );</a></dt>

<dd>
<dt><a name='p'></a><a name="$p_=_HTML::TokeParser-&#62;new(_$filehandle,_%opt_);"
>$p = HTML::TokeParser-&#62;new( $filehandle, %opt );</a></dt>

<dd>
<dt><a name='p'></a><a name="$p_=_HTML::TokeParser-&#62;new(_\$document,_%opt_);"
>$p = HTML::TokeParser-&#62;new( \$document, %opt );</a></dt>

<dd>
<p>The object constructor argument is either a file name, a file handle object, or the complete document to be parsed. Extra options can be provided as key/value pairs and are processed as documented by the base classes.</p>

<p>If the argument is a plain scalar, then it is taken as the name of a file to be opened and parsed. If the file can&#39;t be opened for reading, then the constructor will return <code>undef</code> and $! will tell you why it failed.</p>

<p>If the argument is a reference to a plain scalar, then this scalar is taken to be the literal document to parse. The value of this scalar should not be changed before all tokens have been extracted.</p>

<p>Otherwise the argument is taken to be some object that the <code>HTML::TokeParser</code> can read() from when it needs more data. Typically it will be a filehandle of some kind. The stream will be read() until EOF, but not closed.</p>

<p>A newly constructed <code>HTML::TokeParser</code> differ from its base classes by having the <code>unbroken_text</code> attribute enabled by default. See <a href="/~gaas/HTML-Parser-3.69/Parser.pm" class="podlinkpod"
>HTML::Parser</a> for a description of this and other attributes that influence how the document is parsed. It is often a good idea to enable <code>empty_element_tags</code> behaviour.</p>

<p>Note that the parsing result will likely not be valid if raw undecoded UTF-8 is used as a source. When parsing UTF-8 encoded files turn on UTF-8 decoding:</p>

<pre class="sh_perl">   open(my $fh, &#34;&#60;:utf8&#34;, &#34;index.html&#34;) || die &#34;Can&#39;t open &#39;index.html&#39;: $!&#34;;
   my $p = HTML::TokeParser-&#62;new( $fh );
   # ...</pre>

<p>If a $filename is passed to the constructor the file will be opened in raw mode and the parsing result will only be valid if its content is Latin-1 or pure ASCII.</p>

<p>If parsing from an UTF-8 encoded string buffer decode it first:</p>

<pre class="sh_perl">   utf8::decode($document);
   my $p = HTML::TokeParser-&#62;new( \$document );
   # ...</pre>

<dt><a name='p'></a><a name="$p-&#62;get_token"
>$p-&#62;get_token</a></dt>

<dd>
<p>This method will return the next <i>token</i> found in the HTML document, or <code>undef</code> at the end of the document. The token is returned as an array reference. The first element of the array will be a string denoting the type of this token: &#34;S&#34; for start tag, &#34;E&#34; for end tag, &#34;T&#34; for text, &#34;C&#34; for comment, &#34;D&#34; for declaration, and &#34;PI&#34; for process instructions. The rest of the token array depend on the type like this:</p>

<pre class="sh_perl">  [&#34;S&#34;,  $tag, $attr, $attrseq, $text]
  [&#34;E&#34;,  $tag, $text]
  [&#34;T&#34;,  $text, $is_data]
  [&#34;C&#34;,  $text]
  [&#34;D&#34;,  $text]
  [&#34;PI&#34;, $token0, $text]</pre>

<p>where $attr is a hash reference, $attrseq is an array reference and the rest are plain scalars. The <a href="/~gaas/HTML-Parser-3.69/Parser.pm#Argspec" class="podlinkpod"
>&#34;Argspec&#34; in HTML::Parser</a> explains the details.</p>

<dt><a name='p'></a><a name="$p-&#62;unget_token(_@tokens_)"
>$p-&#62;unget_token( @tokens )</a></dt>

<dd>
<p>If you find you have read too many tokens you can push them back, so that they are returned the next time $p-&#62;get_token is called.</p>

<dt><a name='p'></a><a name="$p-&#62;get_tag"
>$p-&#62;get_tag</a></dt>

<dd>
<dt><a name='p'></a><a name="$p-&#62;get_tag(_@tags_)"
>$p-&#62;get_tag( @tags )</a></dt>

<dd>
<p>This method returns the next start or end tag (skipping any other tokens), or <code>undef</code> if there are no more tags in the document. If one or more arguments are given, then we skip tokens until one of the specified tag types is found. For example:</p>

<pre class="sh_perl">   $p-&#62;get_tag(&#34;font&#34;, &#34;/font&#34;);</pre>

<p>will find the next start or end tag for a font-element.</p>

<p>The tag information is returned as an array reference in the same form as for $p-&#62;get_token above, but the type code (first element) is missing. A start tag will be returned like this:</p>

<pre class="sh_perl">  [$tag, $attr, $attrseq, $text]</pre>

<p>The tagname of end tags are prefixed with &#34;/&#34;, i.e. end tag is returned like this:</p>

<pre class="sh_perl">  [&#34;/$tag&#34;, $text]</pre>

<dt><a name='p'></a><a name="$p-&#62;get_text"
>$p-&#62;get_text</a></dt>

<dd>
<dt><a name='p'></a><a name="$p-&#62;get_text(_@endtags_)"
>$p-&#62;get_text( @endtags )</a></dt>

<dd>
<p>This method returns all text found at the current position. It will return a zero length string if the next token is not text. Any entities will be converted to their corresponding character.</p>

<p>If one or more arguments are given, then we return all text occurring before the first of the specified tags found. For example:</p>

<pre class="sh_perl">   $p-&#62;get_text(&#34;p&#34;, &#34;br&#34;);</pre>

<p>will return the text up to either a paragraph of linebreak element.</p>

<p>The text might span tags that should be <i>textified</i>. This is controlled by the $p-&#62;{textify} attribute, which is a hash that defines how certain tags can be treated as text. If the name of a start tag matches a key in this hash then this tag is converted to text. The hash value is used to specify which tag attribute to obtain the text from. If this tag attribute is missing, then the upper case name of the tag enclosed in brackets is returned, e.g. &#34;[IMG]&#34;. The hash value can also be a subroutine reference. In this case the routine is called with the start tag token content as its argument and the return value is treated as the text.</p>

<p>The default $p-&#62;{textify} value is:</p>

<pre class="sh_perl">  {img =&#62; &#34;alt&#34;, applet =&#62; &#34;alt&#34;}</pre>

<p>This means that &#60;IMG&#62; and &#60;APPLET&#62; tags are treated as text, and that the text to substitute can be found in the ALT attribute.</p>

<dt><a name='p'></a><a name="$p-&#62;get_trimmed_text"
>$p-&#62;get_trimmed_text</a></dt>

<dd>
<dt><a name='p'></a><a name="$p-&#62;get_trimmed_text(_@endtags_)"
>$p-&#62;get_trimmed_text( @endtags )</a></dt>

<dd>
<p>Same as $p-&#62;get_text above, but will collapse any sequences of white space to a single space character. Leading and trailing white space is removed.</p>

<dt><a name='p'></a><a name="$p-&#62;get_phrase"
>$p-&#62;get_phrase</a></dt>

<dd>
<p>This will return all text found at the current position ignoring any phrasal-level tags. Text is extracted until the first non phrasal-level tag. Textification of tags is the same as for get_text(). This method will collapse white space in the same way as get_trimmed_text() does.</p>

<p>The definition of &#60;i&#62;phrasal-level tags&#60;/i&#62; is obtained from the HTML::Tagset module.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This example extracts all links from a document. It will print one line for each link, containing the URL and the textual description between the &#60;A&#62;...&#60;/A&#62; tags:</p>

<pre class="sh_perl">  use HTML::TokeParser;
  $p = HTML::TokeParser-&#62;new(shift||&#34;index.html&#34;);

  while (my $token = $p-&#62;get_tag(&#34;a&#34;)) {
      my $url = $token-&#62;[1]{href} || &#34;-&#34;;
      my $text = $p-&#62;get_trimmed_text(&#34;/a&#34;);
      print &#34;$url\t$text\n&#34;;
  }</pre>

<p>This example extract the &#60;TITLE&#62; from the document:</p>

<pre class="sh_perl">  use HTML::TokeParser;
  $p = HTML::TokeParser-&#62;new(shift||&#34;index.html&#34;);
  if ($p-&#62;get_tag(&#34;title&#34;)) {
      my $title = $p-&#62;get_trimmed_text;
      print &#34;Title: $title\n&#34;;
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p><a href="/~gaas/HTML-Parser-3.69/lib/HTML/PullParser.pm" class="podlinkpod"
>HTML::PullParser</a>, <a href="/~gaas/HTML-Parser-3.69/Parser.pm" class="podlinkpod"
>HTML::Parser</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Copyright 1998-2005 Gisle Aas.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78280 Uploads, 24725 Distributions
106010 Modules, 9649 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Sat Apr 28 05:49:42 2012 GMT (0.106037139892578) @cpansearch1 -->
 </body>
</html>
