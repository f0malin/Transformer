<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>User::Utmp - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","User-Utmp",3]);
    _gaq.push(["_setCustomVar",5,"Release","User-Utmp-1.8",3]);
    _gaq.push(["_setCustomVar",3,"Module","User::Utmp",3]);
    _gaq.push(["_setCustomVar",1,"Author","MPIOTR",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?User::Utmp">permalink</a></div>
  <a href="/~mpiotr/">Michael Piotrowski</a> &gt;
  <a href="/~mpiotr/User-Utmp-1.8/">User-Utmp-1.8</a> &gt;
  User::Utmp
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/7f14aad911f1c3a10a506604a86f465c?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/M/MP/MPIOTR/User-Utmp-1.8.tar.gz">User-Utmp-1.8.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=User%3A%3AUtmp;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~MPIOTR/User-Utmp-1.8/Utmp.pm">Annotate this POD
</a></p>
<div class=box style='width:150px; float: right'>
<h1 class=t5>Related Modules</h1>
<div style="margin:2px">
<a href="/perldoc?Sys%3A%3AUtmp">Sys::Utmp</a><br>
<a href="/perldoc?Net%3A%3ASSH">Net::SSH</a><br>
<a href="/perldoc?Getopt%3A%3ALong">Getopt::Long</a><br>
<small>
<a href="http://perlmonks.org/?node=cpan+module+search&pivot=1&module=User%3A%3AUtmp">more...</a><br>
By <a href="http://perlmonks.org/">perlmonks.org</a></small>
</div>
</div>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 2</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 3</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=User-Utmp">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  1.8 &nbsp;
<span class="noprint">
  <a href="/src/MPIOTR/User-Utmp-1.8/Utmp.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Utmpx_functions'>Utmpx functions</a>
    <li class='indexItem indexItem2'><a href='#Utmp_functions'>Utmp functions</a>
    <li class='indexItem indexItem2'><a href='#Constants'>Constants</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXAMPLES'>EXAMPLES</a>
  <li class='indexItem indexItem1'><a href='#NOTES'>NOTES</a>
  <li class='indexItem indexItem1'><a href='#RESTRICTIONS'>RESTRICTIONS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>User::Utmp - Perl access to utmp- and utmpx-style databases</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl">  use User::Utmp qw(:constants :utmpx);
  @utmp = getutx();</pre>

<p>or, using utmp:</p>

<pre class="sh_perl">  use User::Utmp qw(:constants :utmp);
  @utmp = getut();</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>UNIX systems record information about current and past logins in a user accounting database. This database is realized by two files: File <em>utmpx</em> contains a record of all users currently logged onto the system, while file <em>wtmpx</em> contains a record of all logins and logouts. Some systems (such as HP-UX and AIX) also maintain a third file containing failed login attempts. The information in these files is used by commands such as who(1), last(1), write(1), or login(1).</p>

<p>The exact location of these files in the file system varies between operating systems, but they are typically stored in directories like <em>/var/adm</em>, <em>/var/run</em>, or <em>/var/log</em>. The Single UNIX Specification specifies an API for reading from and writing to these files.</p>

<p>The utmpx file format and functions were derived from the older utmp file format and functions. For compatibility reasons, many systems still support the utmp functions and maintain utmp database files. It is recommended, however, to use the utmpx functions instead of the obsolete utmp functions.</p>

<p>The User::Utmp module provides functions for reading and writing utmpx and utmp files by providing a Perl interface to the system functions.</p>

<p>Utmpx and utmp records are represented in Perl by hash references. The hash keys are the names of the elements of the utmpx structure. For details consult utmpx(4) (utmpx(5) on some systems). The hash values are (mostly) the same as in C.</p>

<p>As an example, here is a typical record as it may be returned by the getutxent(), getutxid(), getutxline() or the corresponding utmp functions:</p>

<pre class="sh_perl">  {ut_tv   =&#62; {tv_sec =&#62; 1141256698, tv_usec =&#62; 0},
   ut_line =&#62; &#34;ttyp0&#34;,
   ut_time =&#62; 1141256698,
   ut_id   =&#62; &#34;p0&#34;,
   ut_host =&#62; &#34;:0.0&#34;,
   ut_exit =&#62; {e_termination =&#62; 0, e_exit =&#62; 2},
   ut_pid  =&#62; 4577,
   ut_user =&#62; &#34;mxp&#34;,
   ut_type =&#62; USER_PROCESS,}</pre>

<p>The array returned by the getutx() and getut() functions is composed of hash references like this.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Utmpx_functions"
>Utmpx functions</a></h2>

<p>User::Utmp offers a high-level function for reading a utmpx database, getutx(), and access to the lower-level utmpx functions defined by the Single UNIX Specification and vendor extensions.</p>

<dl>
<dt><a name='getutx'></a><a name="getutx()"
><b>getutx()</b></a></dt>

<dd>
<p>Reads a utmpx-like file and converts it to a Perl array of hashes. See above for a description of the hashes.</p>

<p>Note that <code>ut_addr</code> (if provided by the utmpx implementation) contains an Internet address (four bytes in network order), not a number. It is therefore converted to a string suitable as parameter to gethostbyname(). If the record doesn&#39;t describe a remote login <code>ut_addr</code> is the empty string.</p>

<p>For compatibility with utmp, User::Utmp provides a <code>ut_time</code> field which contains the same value as the <code>ut_tv.tv_sec</code> field.</p>
</dd>
</dl>

<p>The following functions are equivalent to the C functions of the same names; refer to your system&#39;s documentation for details.</p>

<dl>
<dt><a name='endutxent'></a><a name="endutxent()"
><b>endutxent()</b></a></dt>

<dd>
<p>Closes the database.</p>

<dt><a name='getutxent'></a><a name="getutxent()"
><b>getutxent()</b></a></dt>

<dd>
<p>Read the next entry from the database. Returns a hash ref or undef if the end of the database is reached.</p>

<dt><a name='getutxid'></a><a name="getutxid()"
><b>getutxid()</b></a></dt>

<dd>
<p>This function takes a hash ref as argument and searches for a database entry matching the values for the <code>ut_type</code> and <code>ut_id</code> keys specified in the argument. Returns a hash ref or undef if no matching entry could be found.</p>

<dt><a name='getutxline'></a><a name="getutxline()"
><b>getutxline()</b></a></dt>

<dd>
<p>This function takes a hash ref as argument and searches for an entry of the type LOGIN_PROCESS or USER_PROCESS which also has a <code>ut_line</code> value matching that in the argument.</p>

<dt><a name='pututxline'></a><a name="pututxline()"
><b>pututxline()</b></a></dt>

<dd>
<p>Writes out the supplied utmpx record into the current database. pututxline() takes a reference to a hash which has the same structure and contents as the elements of the array returned by getut(). Whether or not pututxline() creates the utmp file if it doesn&#39;t exist is implementation-dependent.</p>

<dt><a name='setutxent'></a><a name="setutxent()"
><b>setutxent()</b></a></dt>

<dd>
<p>Resets the current database.</p>

<dt><a name='utmpxname'></a><a name="utmpxname()"
><b>utmpxname()</b></a></dt>

<dd>
<p>Allows the user to change the name of the file being examined from the default file (see the section <a href="#Constants" class="podlinkpod"
>&#34;Constants&#34;</a> below) to any other file. The name provided to utmpxname() will then be used for all following utmpx functions.</p>

<p>This is a vendor extension, which may not be available on all systems.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Utmp_functions"
>Utmp functions</a></h2>

<p>User::Utmp offers a high-level function for reading a utmp database, getut(), and access to the lower-level utmp functions.</p>

<dl>
<dt><a name='getut'></a><a name="getut()"
><b>getut()</b></a></dt>

<dd>
<p>Reads a utmp-like file and converts it to a Perl array of hashes. See above for a description of the hashes.</p>

<p>Note that <code>ut_addr</code> (if provided by the utmpx implementation) contains an Internet address (four bytes in network order), not a number. It is therefore converted to a string suitable as parameter to gethostbyname(). If the record doesn&#39;t describe a remote login <code>ut_addr</code> is the empty string.</p>
</dd>
</dl>

<p>The following functions are equivalent to the C functions of the same names; refer to your system&#39;s documentation for details. Since utmp is not formally standardized, not all functions may be available on your system, or their behavior may vary.</p>

<dl>
<dt><a name='endutent'></a><a name="endutent()"
><b>endutent()</b></a></dt>

<dd>
<p>Closes the database.</p>

<dt><a name='getutent'></a><a name="getutent()"
><b>getutent()</b></a></dt>

<dd>
<p>Read the next entry from the database. Returns a hash ref or undef if the end of the database is reached.</p>

<dt><a name='getutid'></a><a name="getutid()"
><b>getutid()</b></a></dt>

<dd>
<p>This function takes a hash ref as argument and searches for a database entry matching the values for the <code>ut_type</code> and <code>ut_id</code> keys specified in the argument. Returns a hash ref or undef if no matching entry could be found.</p>

<dt><a name='getutline'></a><a name="getutline()"
><b>getutline()</b></a></dt>

<dd>
<p>This function takes a hash ref as argument and searches for an entry of the type LOGIN_PROCESS or USER_PROCESS which also has a <code>ut_line</code> value matching that in the argument.</p>

<dt><a name='pututline'></a><a name="pututline()"
><b>pututline()</b></a></dt>

<dd>
<p>Writes out the supplied utmp record into the utmp file. pututline() takes a reference to a hash which has the same structure and contents as the elements of the array returned by getut(). Whether or not pututline() creates the utmp file if it doesn&#39;t exist is implementation-dependent.</p>

<dt><a name='setutent'></a><a name="setutent()"
><b>setutent()</b></a></dt>

<dd>
<p>Resets the current database.</p>

<dt><a name='utmpname'></a><a name="utmpname()"
><b>utmpname()</b></a></dt>

<dd>
<p>Allows the user to change the name of the file being examined from the default file (typically something like <em>/etc/utmp</em> or <em>/var/run/utmp</em>; see the section <a href="#Constants" class="podlinkpod"
>&#34;Constants&#34;</a> below) to any other file. In this case, the name provided to utmpname() will be used for the getut() and pututline() functions. On some operating systems, this may also implicitly set the database for utmpx functions.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Constants"
>Constants</a></h2>

<p>User::Utmp also provides the following constants as functions:</p>

<dl>
<dt><a name="HAS_UTMPX"
>HAS_UTMPX</a></dt>

<dd>
<p>True if User::Utmp was built with support for utmpx.</p>

<dt><a name='UTMP_FILE'></a><a name="UTMP_FILE_UTMPX_FILE_WTMP_FILE_WTMPX_FILE"
>UTMP_FILE UTMPX_FILE WTMP_FILE WTMPX_FILE</a></dt>

<dd>
<p>The default databases. These constants may not be available on all platforms.</p>

<dt><a name='BOOT_TIME'></a><a name="BOOT_TIME_DEAD_PROCESS_EMPTY_INIT_PROCESS_LOGIN_PROCESS_NEW_TIME_OLD_TIME_RUN_LVL_USER_PROCESS"
>BOOT_TIME DEAD_PROCESS EMPTY INIT_PROCESS LOGIN_PROCESS NEW_TIME OLD_TIME RUN_LVL USER_PROCESS</a></dt>

<dd>
<p>Values used in the ut_type field. EMPTY is also used on Linux (instead of the non-standard UT_UNKNOWN used in some Linux versions).</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>See the files <em>example.pl</em> and <em>test.pl</em> in the distribution for usage examples.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NOTES"
>NOTES <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>The utmpx interface is standardized in the the Single UNIX Specificaton and should therefore be used in preference to the legacy utmp functions. Some systems only provide minimal utmp support.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="RESTRICTIONS"
>RESTRICTIONS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Reading the whole file into an array might not be the most efficient approach for very large databases.</p>

<p>This module is based on the non-reentrant utmpx and utmp functions; it is therefore not thread-safe.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Michael Piotrowski &#60;mxp@dynalabs.de&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>utmpx(4), utmp(4); on some systems: utmpx(5), utmp(5)</p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78067 Uploads, 24686 Distributions
105893 Modules, 9637 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Sun Apr 22 02:41:08 2012 GMT (0.0940091609954834) @cpansearch1 -->
 </body>
</html>
