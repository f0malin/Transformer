<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>TAP::Harness - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","Test-Harness",3]);
    _gaq.push(["_setCustomVar",5,"Release","Test-Harness-3.23",3]);
    _gaq.push(["_setCustomVar",3,"Module","TAP::Harness",3]);
    _gaq.push(["_setCustomVar",1,"Author","ANDYA",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?TAP::Harness">permalink</a></div>
  <a href="/~andya/">Andy Armstrong</a> &gt;
  <a href="/~andya/Test-Harness-3.23/">Test-Harness-3.23</a> &gt;
  TAP::Harness
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/0bf43dede29b43014200dd0b0a438877?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/A/AN/ANDYA/Test-Harness-3.23.tar.gz">Test-Harness-3.23.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=TAP%3A%3AHarness;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~ANDYA/Test-Harness-3.23/lib/TAP/Harness.pm">Annotate this POD
(1)
</a></p>
     <p style="text-align:right"><a href="http://testanything.org/">Website</a></p>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 16</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 16</td></tr>
</table>
<a href="http://rt.cpan.org/Public/Dist/Display.html?Name=Test-Harness">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  3.23 &nbsp;
<span class="noprint">
  <a href="/src/ANDYA/Test-Harness-3.23/lib/TAP/Harness.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Class_Methods'>Class Methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#new'>new</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Instance_Methods'>Instance Methods</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#runtests'>runtests</a>
      <li class='indexItem indexItem3'><a href='#summary'>summary</a>
      <li class='indexItem indexItem3'><a href='#aggregate_tests'>aggregate_tests</a>
      <li class='indexItem indexItem3'><a href='#make_scheduler'>make_scheduler</a>
      <li class='indexItem indexItem3'><a href='#jobs'>jobs</a>
      <li class='indexItem indexItem3'><a href='#make_parser'>make_parser</a>
      <li class='indexItem indexItem3'><a href='#finish_parser'>finish_parser</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONFIGURING'>CONFIGURING</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Plugins'>Plugins</a>
    <li class='indexItem indexItem2'><a href='#Module::Build'>Module::Build</a>
    <li class='indexItem indexItem2'><a href='#ExtUtils::MakeMaker'>ExtUtils::MakeMaker</a>
    <li class='indexItem indexItem2'><a href='#prove'>prove</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#WRITING_PLUGINS'>WRITING PLUGINS</a>
  <li class='indexItem indexItem1'><a href='#SUBCLASSING'>SUBCLASSING</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Methods'>Methods</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#REPLACING'>REPLACING</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>TAP::Harness - Run test scripts with statistics</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Version 3.23</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This is a simple test harness which allows tests to be run and results automatically aggregated and output to STDOUT.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl"> use TAP::Harness;
 my $harness = TAP::Harness-&#62;new( \%args );
 $harness-&#62;runtests(@tests);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Class_Methods"
>Class Methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="new"
><code>new</code></a></h3>

<pre class="sh_perl"> my %args = (
    verbosity =&#62; 1,
    lib     =&#62; [ &#39;lib&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39; ],
 )
 my $harness = TAP::Harness-&#62;new( \%args );</pre>

<p>The constructor returns a new <code>TAP::Harness</code> object. It accepts an optional hashref whose allowed keys are:</p>

<ul>
<li><code>verbosity</code>
<p>Set the verbosity level:</p>

<pre class="sh_perl">     1   verbose        Print individual test results to STDOUT.
     0   normal
    -1   quiet          Suppress some test output (mostly failures 
                        while tests are running).
    -2   really quiet   Suppress everything but the tests summary.
    -3   silent         Suppress everything.</pre>
</li>

<li><code>timer</code>
<p>Append run time for each test to output. Uses <a href="/perldoc?Time%3A%3AHiRes" class="podlinkpod"
>Time::HiRes</a> if available.</p>
</li>

<li><code>failures</code>
<p>Show test failures (this is a no-op if <code>verbose</code> is selected).</p>
</li>

<li><code>comments</code>
<p>Show test comments (this is a no-op if <code>verbose</code> is selected).</p>
</li>

<li><code>show_count</code>
<p>Update the running test count during testing.</p>
</li>

<li><code>normalize</code>
<p>Set to a true value to normalize the TAP that is emitted in verbose modes.</p>
</li>

<li><code>lib</code>
<p>Accepts a scalar value or array ref of scalar values indicating which paths to allowed libraries should be included if Perl tests are executed. Naturally, this only makes sense in the context of tests written in Perl.</p>
</li>

<li><code>switches</code>
<p>Accepts a scalar value or array ref of scalar values indicating which switches should be included if Perl tests are executed. Naturally, this only makes sense in the context of tests written in Perl.</p>
</li>

<li><code>test_args</code>
<p>A reference to an <code>@INC</code> style array of arguments to be passed to each test program.</p>

<pre class="sh_perl">  test_args =&#62; [&#39;foo&#39;, &#39;bar&#39;],</pre>

<p>if you want to pass different arguments to each test then you should pass a hash of arrays, keyed by the alias for each test:</p>

<pre class="sh_perl">  test_args =&#62; {
    my_test    =&#62; [&#39;foo&#39;, &#39;bar&#39;],
    other_test =&#62; [&#39;baz&#39;],
  }</pre>
</li>

<li><code>color</code>
<p>Attempt to produce color output.</p>
</li>

<li><code>exec</code>
<p>Typically, Perl tests are run through this. However, anything which spits out TAP is fine. You can use this argument to specify the name of the program (and optional switches) to run your tests with:</p>

<pre class="sh_perl">  exec =&#62; [&#39;/usr/bin/ruby&#39;, &#39;-w&#39;]</pre>

<p>You can also pass a subroutine reference in order to determine and return the proper program to run based on a given test script. The subroutine reference should expect the TAP::Harness object itself as the first argument, and the file name as the second argument. It should return an array reference containing the command to be run and including the test file name. It can also simply return <code>undef</code>, in which case TAP::Harness will fall back on executing the test script in Perl:</p>

<pre class="sh_perl">    exec =&#62; sub {
        my ( $harness, $test_file ) = @_;

        # Let Perl tests run.
        return undef if $test_file =~ /[.]t$/;
        return [ qw( /usr/bin/ruby -w ), $test_file ]
          if $test_file =~ /[.]rb$/;
      }</pre>

<p>If the subroutine returns a scalar with a newline or a filehandle, it will be interpreted as raw TAP or as a TAP stream, respectively.</p>
</li>

<li><code>merge</code>
<p>If <code>merge</code> is true the harness will create parsers that merge STDOUT and STDERR together for any processes they start.</p>
</li>

<li><code>sources</code>
<p><i>NEW to 3.18</i>.</p>

<p>If set, <code>sources</code> must be a hashref containing the names of the <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/SourceHandler.pm" class="podlinkpod"
>TAP::Parser::SourceHandler</a>s to load and/or configure. The values are a hash of configuration that will be accessible to to the source handlers via <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Source.pm#config_for" class="podlinkpod"
>&#34;config_for&#34; in TAP::Parser::Source</a>.</p>

<p>For example:</p>

<pre class="sh_perl">  sources =&#62; {
    Perl =&#62; { exec =&#62; &#39;/path/to/custom/perl&#39; },
    File =&#62; { extensions =&#62; [ &#39;.tap&#39;, &#39;.txt&#39; ] },
    MyCustom =&#62; { some =&#62; &#39;config&#39; },
  }</pre>

<p>The <code>sources</code> parameter affects how <code>source</code>, <code>tap</code> and <code>exec</code> parameters are handled.</p>

<p>For more details, see the <code>sources</code> parameter in <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser.pm#new" class="podlinkpod"
>&#34;new&#34; in TAP::Parser</a>, <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Source.pm" class="podlinkpod"
>TAP::Parser::Source</a>, and <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/IteratorFactory.pm" class="podlinkpod"
>TAP::Parser::IteratorFactory</a>.</p>
</li>

<li><code>aggregator_class</code>
<p>The name of the class to use to aggregate test results. The default is <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Aggregator.pm" class="podlinkpod"
>TAP::Parser::Aggregator</a>.</p>
</li>

<li><code>version</code>
<p><i>NEW to 3.22</i>.</p>

<p>Assume this TAP version for <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser.pm" class="podlinkpod"
>TAP::Parser</a> instead of default TAP version 12.</p>
</li>

<li><code>formatter_class</code>
<p>The name of the class to use to format output. The default is <a href="/~andya/Test-Harness-3.23/lib/TAP/Formatter/Console.pm" class="podlinkpod"
>TAP::Formatter::Console</a>, or <a href="/~andya/Test-Harness-3.23/lib/TAP/Formatter/File.pm" class="podlinkpod"
>TAP::Formatter::File</a> if the output isn&#39;t a TTY.</p>
</li>

<li><code>multiplexer_class</code>
<p>The name of the class to use to multiplex tests during parallel testing. The default is <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Multiplexer.pm" class="podlinkpod"
>TAP::Parser::Multiplexer</a>.</p>
</li>

<li><code>parser_class</code>
<p>The name of the class to use to parse TAP. The default is <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser.pm" class="podlinkpod"
>TAP::Parser</a>.</p>
</li>

<li><code>scheduler_class</code>
<p>The name of the class to use to schedule test execution. The default is <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Scheduler.pm" class="podlinkpod"
>TAP::Parser::Scheduler</a>.</p>
</li>

<li><code>formatter</code>
<p>If set <code>formatter</code> must be an object that is capable of formatting the TAP output. See <a href="/~andya/Test-Harness-3.23/lib/TAP/Formatter/Console.pm" class="podlinkpod"
>TAP::Formatter::Console</a> for an example.</p>
</li>

<li><code>errors</code>
<p>If parse errors are found in the TAP output, a note of this will be made in the summary report. To see all of the parse errors, set this argument to true:</p>

<pre class="sh_perl">  errors =&#62; 1</pre>
</li>

<li><code>directives</code>
<p>If set to a true value, only test results with directives will be displayed. This overrides other settings such as <code>verbose</code> or <code>failures</code>.</p>
</li>

<li><code>ignore_exit</code>
<p>If set to a true value instruct <code>TAP::Parser</code> to ignore exit and wait status from test scripts.</p>
</li>

<li><code>jobs</code>
<p>The maximum number of parallel tests to run at any time. Which tests can be run in parallel is controlled by <code>rules</code>. The default is to run only one test at a time.</p>
</li>

<li><code>rules</code>
<p>A reference to a hash of rules that control which tests may be executed in parallel. This is an experimental feature and the interface may change.</p>

<pre class="sh_perl">    $harness-&#62;rules(
        {   par =&#62; [
                { seq =&#62; &#39;../ext/DB_File/t/*&#39; },
                { seq =&#62; &#39;../ext/IO_Compress_Zlib/t/*&#39; },
                { seq =&#62; &#39;../lib/CPANPLUS/*&#39; },
                { seq =&#62; &#39;../lib/ExtUtils/t/*&#39; },
                &#39;*&#39;
            ]
        }
    );</pre>
</li>

<li><code>stdout</code>
<p>A filehandle for catching standard output.</p>
</li>

<li><code>trap</code>
<p>Attempt to print summary information if run is interrupted by SIGINT (Ctrl-C).</p>
</li>
</ul>

<p>Any keys for which the value is <code>undef</code> will be ignored.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Instance_Methods"
>Instance Methods</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="runtests"
><code>runtests</code></a></h3>

<pre class="sh_perl">    $harness-&#62;runtests(@tests);</pre>

<p>Accepts an array of <code>@tests</code> to be run. This should generally be the names of test files, but this is not required. Each element in <code>@tests</code> will be passed to <code>TAP::Parser::new()</code> as a <code>source</code>. See <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser.pm" class="podlinkpod"
>TAP::Parser</a> for more information.</p>

<p>It is possible to provide aliases that will be displayed in place of the test name by supplying the test as a reference to an array containing <code>[ $test, $alias ]</code>:</p>

<pre class="sh_perl">    $harness-&#62;runtests( [ &#39;t/foo.t&#39;, &#39;Foo Once&#39; ],
                        [ &#39;t/foo.t&#39;, &#39;Foo Twice&#39; ] );</pre>

<p>Normally it is an error to attempt to run the same test twice. Aliases allow you to overcome this limitation by giving each run of the test a unique name.</p>

<p>Tests will be run in the order found.</p>

<p>If the environment variable <code>PERL_TEST_HARNESS_DUMP_TAP</code> is defined it should name a directory into which a copy of the raw TAP for each test will be written. TAP is written to files named for each test. Subdirectories will be created as needed.</p>

<p>Returns a <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Aggregator.pm" class="podlinkpod"
>TAP::Parser::Aggregator</a> containing the test results.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="summary"
><code>summary</code></a></h3>

<pre class="sh_perl">  $harness-&#62;summary( $aggregator );</pre>

<p>Output the summary for a <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Aggregator.pm" class="podlinkpod"
>TAP::Parser::Aggregator</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="aggregate_tests"
><code>aggregate_tests</code></a></h3>

<pre class="sh_perl">  $harness-&#62;aggregate_tests( $aggregate, @tests );</pre>

<p>Run the named tests and display a summary of result. Tests will be run in the order found.</p>

<p>Test results will be added to the supplied <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Aggregator.pm" class="podlinkpod"
>TAP::Parser::Aggregator</a>. <code>aggregate_tests</code> may be called multiple times to run several sets of tests. Multiple <code>Test::Harness</code> instances may be used to pass results to a single aggregator so that different parts of a complex test suite may be run using different <code>TAP::Harness</code> settings. This is useful, for example, in the case where some tests should run in parallel but others are unsuitable for parallel execution.</p>

<pre class="sh_perl">    my $formatter   = TAP::Formatter::Console-&#62;new;
    my $ser_harness = TAP::Harness-&#62;new( { formatter =&#62; $formatter } );
    my $par_harness = TAP::Harness-&#62;new(
        {   formatter =&#62; $formatter,
            jobs      =&#62; 9
        }
    );
    my $aggregator = TAP::Parser::Aggregator-&#62;new;

    $aggregator-&#62;start();
    $ser_harness-&#62;aggregate_tests( $aggregator, @ser_tests );
    $par_harness-&#62;aggregate_tests( $aggregator, @par_tests );
    $aggregator-&#62;stop();
    $formatter-&#62;summary($aggregator);</pre>

<p>Note that for simpler testing requirements it will often be possible to replace the above code with a single call to <code>runtests</code>.</p>

<p>Each element of the <code>@tests</code> array is either:</p>

<ul>
<li>the source name of a test to run</li>

<li>a reference to a [ source name, display name ] array</li>
</ul>

<p>In the case of a perl test suite, typically <i>source names</i> are simply the file names of the test scripts to run.</p>

<p>When you supply a separate display name it becomes possible to run a test more than once; the display name is effectively the alias by which the test is known inside the harness. The harness doesn&#39;t care if it runs the same test more than once when each invocation uses a different name.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="make_scheduler"
><code>make_scheduler</code></a></h3>

<p>Called by the harness when it needs to create a <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/Scheduler.pm" class="podlinkpod"
>TAP::Parser::Scheduler</a>. Override in a subclass to provide an alternative scheduler. <code>make_scheduler</code> is passed the list of tests that was passed to <code>aggregate_tests</code>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="jobs"
><code>jobs</code></a></h3>

<p>Gets or sets the number of concurrent test runs the harness is handling. By default, this value is 1 -- for parallel testing, this should be set higher.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="make_parser"
><code>make_parser</code></a></h3>

<p>Make a new parser and display formatter session. Typically used and/or overridden in subclasses.</p>

<pre class="sh_perl">    my ( $parser, $session ) = $harness-&#62;make_parser;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="finish_parser"
><code>finish_parser</code></a></h3>

<p>Terminate use of a parser. Typically used and/or overridden in subclasses. The parser isn&#39;t destroyed as a result of this.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURING"
>CONFIGURING <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p><code>TAP::Harness</code> is designed to be easy to configure.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Plugins"
>Plugins</a></h2>

<p><code>TAP::Parser</code> plugins let you change the way TAP is <i>input</i> to and <i>output</i> from the parser.</p>

<p><a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/SourceHandler.pm" class="podlinkpod"
>TAP::Parser::SourceHandler</a>s handle TAP <i>input</i>. You can configure them and load custom handlers using the <code>sources</code> parameter to <a href="#new" class="podlinkpod"
>&#34;new&#34;</a>.</p>

<p><a href="/perldoc?TAP%3A%3AFormatter" class="podlinkpod"
>TAP::Formatter</a>s handle TAP <i>output</i>. You can load custom formatters by using the <code>formatter_class</code> parameter to <a href="#new" class="podlinkpod"
>&#34;new&#34;</a>. To configure a formatter, you currently need to instantiate it outside of <a href="/~andya/Test-Harness-3.23/lib/TAP/Harness.pm" class="podlinkpod"
>TAP::Harness</a> and pass it in with the <code>formatter</code> parameter to <a href="#new" class="podlinkpod"
>&#34;new&#34;</a>. This <i>may</i> be addressed by adding a <i>formatters</i> parameter to <a href="#new" class="podlinkpod"
>&#34;new&#34;</a> in the future.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Module::Build"
><code>Module::Build</code></a></h2>

<p><a href="/perldoc?Module%3A%3ABuild" class="podlinkpod"
>Module::Build</a> version <code>0.30</code> supports <code>TAP::Harness</code>.</p>

<p>To load <code>TAP::Harness</code> plugins, you&#39;ll need to use the <code>tap_harness_args</code> parameter to <code>new</code>, typically from your <code>Build.PL</code>. For example:</p>

<pre class="sh_perl">  Module::Build-&#62;new(
      module_name        =&#62; &#39;MyApp&#39;,
      test_file_exts     =&#62; [qw(.t .tap .txt)],
      use_tap_harness    =&#62; 1,
      tap_harness_args   =&#62; {
          sources =&#62; {
              MyCustom =&#62; {},
              File =&#62; {
                  extensions =&#62; [&#39;.tap&#39;, &#39;.txt&#39;],
              },
          },
          formatter =&#62; &#39;TAP::Formatter::HTML&#39;,
      },
      build_requires     =&#62; {
          &#39;Module::Build&#39; =&#62; &#39;0.30&#39;,
          &#39;TAP::Harness&#39;  =&#62; &#39;3.18&#39;,
      },
  )-&#62;create_build_script;</pre>

<p>See <a href="#new" class="podlinkpod"
>&#34;new&#34;</a></p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ExtUtils::MakeMaker"
><code>ExtUtils::MakeMaker</code></a></h2>

<p><a href="/perldoc?ExtUtils%3A%3AMakeMaker" class="podlinkpod"
>ExtUtils::MakeMaker</a> does not support <a href="/~andya/Test-Harness-3.23/lib/TAP/Harness.pm" class="podlinkpod"
>TAP::Harness</a> out-of-the-box.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prove"
><code>prove</code></a></h2>

<p><a href="/~andya/Test-Harness-3.23/bin/prove" class="podlinkpod"
>prove</a> supports <code>TAP::Harness</code> plugins, and has a plugin system of its own. See <a href="/~andya/Test-Harness-3.23/bin/prove#FORMATTERS" class="podlinkpod"
>&#34;FORMATTERS&#34; in prove</a>, <a href="/~andya/Test-Harness-3.23/bin/prove#SOURCE_HANDLERS" class="podlinkpod"
>&#34;SOURCE HANDLERS&#34; in prove</a> and <a href="/~andya/Test-Harness-3.23/lib/App/Prove.pm" class="podlinkpod"
>App::Prove</a> for more details.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="WRITING_PLUGINS"
>WRITING PLUGINS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>If you can&#39;t configure <code>TAP::Harness</code> to do what you want, and you can&#39;t find an existing plugin, consider writing one.</p>

<p>The two primary use cases supported by <a href="/~andya/Test-Harness-3.23/lib/TAP/Harness.pm" class="podlinkpod"
>TAP::Harness</a> for plugins are <i>input</i> and <i>output</i>:</p>

<dl>
<dt><a name='Customize'></a><a name="Customize_how_TAP_gets_into_the_parser"
>Customize how TAP gets into the parser</a></dt>

<dd>
<p>To do this, you can either extend an existing <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser/SourceHandler.pm" class="podlinkpod"
>TAP::Parser::SourceHandler</a>, or write your own. It&#39;s a pretty simple API, and they can be loaded and configured using the <code>sources</code> parameter to <a href="#new" class="podlinkpod"
>&#34;new&#34;</a>.</p>

<dt><a name='Customize'></a><a name="Customize_how_TAP_results_are_output_from_the_parser"
>Customize how TAP results are output from the parser</a></dt>

<dd>
<p>To do this, you can either extend an existing <a href="/perldoc?TAP%3A%3AFormatter" class="podlinkpod"
>TAP::Formatter</a>, or write your own. Writing formatters are a bit more involved than writing a <i>SourceHandler</i>, as you&#39;ll need to understand the <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser.pm" class="podlinkpod"
>TAP::Parser</a> API. A good place to start is by understanding how <a href="#aggregate_tests" class="podlinkpod"
>&#34;aggregate_tests&#34;</a> works.</p>

<p>Custom formatters can be loaded configured using the <code>formatter_class</code> parameter to <a href="#new" class="podlinkpod"
>&#34;new&#34;</a>.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUBCLASSING"
>SUBCLASSING <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>If you can&#39;t configure <code>TAP::Harness</code> to do exactly what you want, and writing a plugin isn&#39;t an option, consider extending it. It is designed to be (mostly) easy to subclass, though the cases when sub-classing is necessary should be few and far between.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Methods"
>Methods</a></h2>

<p>The following methods are ones you may wish to override if you want to subclass <code>TAP::Harness</code>.</p>

<dl>
<dt><a name='new'></a><a name="&#34;new&#34;"
><a href="#new" class="podlinkpod"
>&#34;new&#34;</a></a></dt>

<dd>
<dt><a name='runtests'></a><a name="&#34;runtests&#34;"
><a href="#runtests" class="podlinkpod"
>&#34;runtests&#34;</a></a></dt>

<dd>
<dt><a name='summary'></a><a name="&#34;summary&#34;"
><a href="#summary" class="podlinkpod"
>&#34;summary&#34;</a></a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="REPLACING"
>REPLACING <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>If you like the <code>prove</code> utility and <a href="/~andya/Test-Harness-3.23/lib/TAP/Parser.pm" class="podlinkpod"
>TAP::Parser</a> but you want your own harness, all you need to do is write one and provide <code>new</code> and <code>runtests</code> methods. Then you can use the <code>prove</code> utility like so:</p>

<pre class="sh_perl"> prove --harness My::Test::Harness</pre>

<p>Note that while <code>prove</code> accepts a list of tests (or things to be tested), <code>new</code> has a fairly rich set of arguments. You&#39;ll probably want to read over this code carefully to see how all of them are being used.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p><a href="/~andya/Test-Harness-3.23/lib/Test/Harness.pm" class="podlinkpod"
>Test::Harness</a></p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78283 Uploads, 24725 Distributions
106015 Modules, 9649 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Sat Apr 28 08:04:14 2012 GMT (0.15328311920166) @cpansearch1 -->
 </body>
</html>
