<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>Asterisk::AGI - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","asterisk-perl",3]);
    _gaq.push(["_setCustomVar",5,"Release","asterisk-perl-1.03",3]);
    _gaq.push(["_setCustomVar",3,"Module","Asterisk::AGI",3]);
    _gaq.push(["_setCustomVar",1,"Author","JAMESGOL",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?Asterisk::AGI">permalink</a></div>
  <a href="/~jamesgol/">James Golovich</a> &gt;
  <a href="/~jamesgol/asterisk-perl-1.03/">asterisk-perl-1.03</a> &gt;
  Asterisk::AGI
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/238eb703121fd227e118d8fac872099a?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/J/JA/JAMESGOL/asterisk-perl-1.03.tar.gz">asterisk-perl-1.03.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=Asterisk%3A%3AAGI;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~JAMESGOL/asterisk-perl-1.03/lib/Asterisk/AGI.pm">Annotate this POD
</a></p>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 3</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 0</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=asterisk-perl">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
<span class="noprint">
  <a href="/src/JAMESGOL/asterisk-perl-1.03/lib/Asterisk/AGI.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#MODULE_COMMANDS'>MODULE COMMANDS</a>
  <li class='indexItem indexItem1'><a href='#AGI_COMMANDS'>AGI COMMANDS</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Asterisk::AGI - Simple Asterisk Gateway Interface Class</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>use Asterisk::AGI;</p>

<p>$AGI = new Asterisk::AGI;</p>

<p># pull AGI variables into %input</p>

<pre class="sh_perl">        %input = $AGI-&#62;ReadParse();   </pre>

<p># say the number 1984</p>

<pre class="sh_perl">        $AGI-&#62;say_number(1984);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This module should make it easier to write scripts that interact with the asterisk open source pbx via AGI (asterisk gateway interface)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="MODULE_COMMANDS"
>MODULE COMMANDS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<dl>
<dt><a name='AGI'></a><a name="$AGI-&#62;setcallback($funcref)"
>$AGI-&#62;setcallback($funcref)</a></dt>

<dd>
<p>Set function to execute when call is hungup or function returns error.</p>

<p>Example: $AGI-&#62;setcallback(\&#38;examplecallback);</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AGI_COMMANDS"
>AGI COMMANDS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<dl>
<dt><a name='AGI'></a><a name="$AGI-&#62;answer()"
>$AGI-&#62;answer()</a></dt>

<dd>
<p>Executes AGI Command &#34;ANSWER&#34;</p>

<p>Answers channel if not already in answer state</p>

<p>Example: $AGI-&#62;answer();</p>

<p>Returns: -1 on channel failure, or 0 if successful</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;channel_status([$channel])"
>$AGI-&#62;channel_status([$channel])</a></dt>

<dd>
<p>Executes AGI Command &#34;CHANNEL STATUS $channel&#34;</p>

<p>Returns the status of the specified channel. If no channel name is given the returns the status of the current channel.</p>

<p>Example: $AGI-&#62;channel_status();</p>

<p>Returns: -1 Channel hungup or error 0 Channel is down and available 1 Channel is down, but reserved 2 Channel is off hook 3 Digits (or equivalent) have been dialed 4 Line is ringing 5 Remote end is ringing 6 Line is up 7 Line is busy</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;control_stream_file($filename,_$digits_[,_$skipms_[,_$ffchar_[,_$rewchar_[,_$pausechar]]]])"
>$AGI-&#62;control_stream_file($filename, $digits [, $skipms [, $ffchar [, $rewchar [, $pausechar]]]])</a></dt>

<dd>
<p>Executes AGI Command &#34;CONTROL STREAM FILE $filename $digits [$skipms [$ffchar [$rewchar [$pausechar]]]]&#34;</p>

<p>Send the given file, allowing playback to be controled by the given digits, if any. Use double quotes for the digits if you wish none to be permitted. Remember, the file extension must not be included in the filename.</p>

<p>Note: ffchar and rewchar default to * and # respectively.</p>

<p>Example: $AGI-&#62;control_stream_file(&#39;status&#39;, &#39;authorized&#39;);</p>

<p>Returns: -1 on error or hangup; 0 if playback completes without a digit being pressed; the ASCII numerical value of the digit of one was pressed.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;database_del($family,_$key)"
>$AGI-&#62;database_del($family, $key)</a></dt>

<dd>
<p>Executes AGI Command &#34;DATABASE DEL $family $key&#34;</p>

<p>Removes database entry &#60;family&#62;/&#60;key&#62;</p>

<p>Example: $AGI-&#62;database_del(&#39;test&#39;, &#39;status&#39;);</p>

<p>Returns: 1 on success, 0 otherwise</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;database_deltree($family,_$key)"
>$AGI-&#62;database_deltree($family, $key)</a></dt>

<dd>
<p>Executes AGI Command &#34;DATABASE DELTREE $family $key&#34;</p>

<p>Deletes a family or specific keytree within a family in the Asterisk database</p>

<p>Example: $AGI-&#62;database_deltree(&#39;test&#39;, &#39;status&#39;); Example: $AGI-&#62;database_deltree(&#39;test&#39;);</p>

<p>Returns: 1 on success, 0 otherwise</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;database_get($family,_$key)"
>$AGI-&#62;database_get($family, $key)</a></dt>

<dd>
<p>Executes AGI Command &#34;DATABASE GET $family $key&#34;</p>

<p>Example: $var = $AGI-&#62;database_get(&#39;test&#39;, &#39;status&#39;);</p>

<p>Returns: The value of the variable, or undef if variable does not exist</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;database_put($family,_$key,_$value)"
>$AGI-&#62;database_put($family, $key, $value)</a></dt>

<dd>
<p>Executes AGI Command &#34;DATABASE PUT $family $key $value&#34;</p>

<p>Set/modifes database entry &#60;family&#62;/&#60;key&#62; to &#60;value&#62;</p>

<p>Example: $AGI-&#62;database_put(&#39;test&#39;, &#39;status&#39;, &#39;authorized&#39;);</p>

<p>Returns: 1 on success, 0 otherwise</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;exec($app,_$options)"
>$AGI-&#62;exec($app, $options)</a></dt>

<dd>
<p>Executes AGI Command &#34;EXEC $app &#34;$options&#34;&#34;</p>

<p>The most powerful AGI command. Executes the given application passing the given options.</p>

<p>Example: $AGI-&#62;exec(&#39;Dial&#39;, &#39;Zap/g2/8005551212&#39;);</p>

<p>Returns: -2 on failure to find application, or whatever the given application returns</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;get_data($filename,_$timeout,_$maxdigits)"
>$AGI-&#62;get_data($filename, $timeout, $maxdigits)</a></dt>

<dd>
<p>Executes AGI Command &#34;GET DATA $filename $timeout $maxdigits&#34;</p>

<p>Streams $filename and returns when $maxdigits have been received or when $timeout has been reached. Timeout is specified in ms</p>

<p>Example: $AGI-&#62;get_data(&#39;demo-welcome&#39;, 15000, 5);</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;get_full_variable($variable_[,_$channel])"
>$AGI-&#62;get_full_variable($variable [, $channel])</a></dt>

<dd>
<p>Executes AGI Command &#34;GET FULL VARIABLE $variablename $channel&#34;</p>

<p>Similar to get_variable, but additionally understands complex variable names and builtin variables. If $channel is not set, uses the current channel.</p>

<p>Example: $AGI-&#62;get_full_variable(&#39;status&#39;, &#39;SIP/4382&#39;);</p>

<p>Returns: The value of the variable, or undef if variable does not exist</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;get_option($filename,_$digits_[,_$timeout])"
>$AGI-&#62;get_option($filename, $digits [, $timeout])</a></dt>

<dd>
<p>Executes AGI Command &#34;GET OPTION $filename $digits $timeout&#34;</p>

<p>Behaves similar to STREAM FILE but used with a timeout option.</p>

<p>Streams $filename and returns when $digits is pressed or when $timeout has been reached. Timeout is specified in ms. If $timeout is not specified, the command will only terminate on the $digits set. $filename can be an array of files or a single filename.</p>

<p>Example: $AGI-&#62;get_option(&#39;demo-welcome&#39;, &#39;#&#39;, 15000); $AGI-&#62;get_option([&#39;demo-welcome&#39;, &#39;demo-echotest&#39;], &#39;#&#39;, 15000);</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;get_variable($variable)"
>$AGI-&#62;get_variable($variable)</a></dt>

<dd>
<p>Executes AGI Command &#34;GET VARIABLE $variablename&#34;</p>

<p>Gets the channel variable &#60;variablename&#62;</p>

<p>Example: $AGI-&#62;get_variable(&#39;status&#39;);</p>

<p>Returns: The value of the variable, or undef if variable does not exist</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;hangup($channel)"
>$AGI-&#62;hangup($channel)</a></dt>

<dd>
<p>Executes AGI Command &#34;HANGUP $channel&#34;</p>

<p>Hangs up the passed $channel, or the current channel if $channel is not passed. It is left to the AGI script to exit properly, otherwise you could end up with zombies.</p>

<p>Example: $AGI-&#62;hangup();</p>

<p>Returns: Always returns 1</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;noop()"
>$AGI-&#62;noop()</a></dt>

<dd>
<p>Executes AGI Command &#34;NOOP&#34;</p>

<p>Does absolutely nothing except pop up a log message. Useful for outputting debugging information to the Asterisk console.</p>

<p>Example: $AGI-&#62;noop(&#34;Test Message&#34;);</p>

<p>Returns: -1 on hangup or error, 0 otherwise</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;receive_char($timeout)"
>$AGI-&#62;receive_char($timeout)</a></dt>

<dd>
<p>Executes AGI Command &#34;RECEIVE CHAR $timeout&#34;</p>

<p>Receives a character of text on a channel. Specify timeout to be the maximum time to wait for input in milliseconds, or 0 for infinite. Most channels do not support the reception of text.</p>

<p>Example: $AGI-&#62;receive_char(3000);</p>

<p>Returns: Returns the decimal value of the character if one is received, or 0 if the channel does not support text reception. Returns -1 only on error/hangup.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;receive_text($timeout)"
>$AGI-&#62;receive_text($timeout)</a></dt>

<dd>
<p>Executes AGI Command &#34;RECEIVE TEXT $timeout&#34;</p>

<p>Receives a string of text on a channel. Specify timeout to be the maximum time to wait for input in milliseconds, or 0 for infinite. Most channels do not support the reception of text.</p>

<p>Example: $AGI-&#62;receive_text(3000);</p>

<p>Returns: Returns the string of text if received, or -1 for failure, error or hangup.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;record_file($filename,_$format,_$digits,_$timeout,_$beep,_$offset,_$beep,_$silence)"
>$AGI-&#62;record_file($filename, $format, $digits, $timeout, $beep, $offset, $beep, $silence)</a></dt>

<dd>
<p>Executes AGI Command &#34;RECORD FILE $filename $format $digits $timeout [$offset [$beep [s=$silence]]]&#34;</p>

<p>Record to a file until $digits are received as dtmf. The $format will specify what kind of file will be recorded. The $timeout is the maximum record time in milliseconds, or -1 for no timeout.</p>

<p>$offset samples is optional, and if provided will seek to the offset without exceeding the end of the file.</p>

<p>$silence is the number of seconds of silence allowed before the function returns despite the lack of dtmf digits or reaching timeout.</p>

<p>Example: $AGI-&#62;record_file(&#39;foo&#39;, &#39;wav&#39;, &#39;#&#39;, &#39;5000&#39;, &#39;0&#39;, 1, &#39;2&#39;);</p>

<p>Returns: 1 on success, -1 on hangup or error.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;say_alpha($string,_$digits)"
>$AGI-&#62;say_alpha($string, $digits)</a></dt>

<dd>
<p>Executes AGI Command &#34;SAY ALPHA &#34;$string&#34; $digits&#34;</p>

<p>Say a given character string, returning early if any of the given DTMF $digits are received on the channel.</p>

<p>Returns Example: $AGI-&#62;say_alpha(&#39;Joe Smith&#39;, &#39;#&#39;);</p>

<p>Returns: 0 if playback completes without a digit being pressed; the ASCII numerical value of the digit if one was pressed; -1 on error/hangup.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;say_date($time_[,_$digits])"
>$AGI-&#62;say_date($time [, $digits])</a></dt>

<dd>
<dt><a name='AGI'></a><a name="$AGI-&#62;say_time($time_[,_$digits])"
>$AGI-&#62;say_time($time [, $digits])</a></dt>

<dd>
<dt><a name='AGI'></a><a name="$AGI-&#62;say_datetime($time_[,_$digits_[,_$format_[,_$timezone]]])"
>$AGI-&#62;say_datetime($time [, $digits [, $format [, $timezone]]])</a></dt>

<dd>
<p>Executes AGI Command &#34;SAY DATE $number $digits&#34; Executes AGI Command &#34;SAY TIME $number $digits&#34; Executes AGI Command &#34;SAY DATETIME $number $digits $format $timezone&#34;</p>

<p>Say a given date or time, returning early if any of the optional DTMF $digits are received on the channel. $time is number of seconds elapsed since 00:00:00 on January 1, 1970, Coordinated Universal Time (UTC), commonly known as &#34;unixtime.&#34;</p>

<p>For say_datetime, $format is the format the time should be said in; see voicemail.conf (defaults to &#34;ABdY &#39;digits/at&#39; IMp&#34;). Acceptable values for $timezone can be found in /usr/share/zoneinfo. Defaults to machine default.</p>

<p>Example: $AGI-&#62;say_date(&#39;100000000&#39;); $AGI-&#62;say_time(&#39;100000000&#39;, &#39;#&#39;); $AGI-&#62;say_datetime(&#39;100000000&#39;, &#39;#&#39;, &#39;ABdY IMp&#39;, &#39;EDT&#39;);</p>

<p>Returns: -1 on error or hangup; 0 if playback completes without a digit being pressed; the ASCII numerical value of the digit of one was pressed.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;say_digits($number,_$digits)"
>$AGI-&#62;say_digits($number, $digits)</a></dt>

<dd>
<p>Executes AGI Command &#34;SAY DIGITS $number $digits&#34;</p>

<p>Says the given digit string $number, returning early if any of the $digits are received.</p>

<p>Example: $AGI-&#62;say_digits(&#39;8675309&#39;);</p>

<p>Returns: -1 on error or hangup, 0 if playback completes without a digit being pressed, or the ASCII numerical value of the digit of one was pressed.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;say_number($number,_$digits,_$gender)"
>$AGI-&#62;say_number($number, $digits, $gender)</a></dt>

<dd>
<p>Executes AGI Command &#34;SAY NUMBER $number $digits [$gender]&#34;</p>

<p>Says the given $number, returning early if any of the $digits are received.</p>

<p>Example: $AGI-&#62;say_number(&#39;98765&#39;);</p>

<p>Returns: -1 on error or hangup, 0 if playback completes without a digit being pressed, or the ASCII numerical value of the digit of one was pressed.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;say_phonetic($string,_$digits)"
>$AGI-&#62;say_phonetic($string, $digits)</a></dt>

<dd>
<p>Executes AGI Command &#34;SAY PHONETIC &#34;$string&#34; $digits&#34;</p>

<p>Say a given character string with phonetics, returning early if any of the given DTMF digits are received on the channel.</p>

<p>Example: $AGI-&#62;say_phonetic(&#39;Joe Smith&#39;, &#39;#&#39;);</p>

<p>Returns: 0 if playback completes without a digit being pressed; the ASCII numerical value of the digit if one was pressed; -1 on error/hangup.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;send_image($image)"
>$AGI-&#62;send_image($image)</a></dt>

<dd>
<p>Executes AGI Command &#34;SEND IMAGE $image</p>

<p>Sends the given image on a channel. Most channels do not support the transmission of images.</p>

<p>Example: $AGI-&#62;send_image(&#39;image.png&#39;);</p>

<p>Returns: -1 on error or hangup, 0 if the image was sent or if the channel does not support image transmission.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;send_text($text)"
>$AGI-&#62;send_text($text)</a></dt>

<dd>
<p>Executes AGI Command &#34;SEND TEXT &#34;$text&#34;</p>

<p>Sends the given text on a channel. Most channels do not support the transmission of text.</p>

<p>Example: $AGI-&#62;send_text(&#39;You&#39;ve got mail!&#39;);</p>

<p>Returns: -1 on error or hangup, 0 if the text was sent or if the channel does not support text transmission.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_autohangup($time)"
>$AGI-&#62;set_autohangup($time)</a></dt>

<dd>
<p>Executes AGI Command &#34;SET AUTOHANGUP $time&#34;</p>

<p>Cause the channel to automatically hangup at &#60;time&#62; seconds in the future. Of course it can be hungup before then as well. Setting to 0 will cause the autohangup feature to be disabled on this channel.</p>

<p>Example: $AGI-&#62;set_autohangup(60);</p>

<p>Returns: Always returns 1</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_callerid($number)"
>$AGI-&#62;set_callerid($number)</a></dt>

<dd>
<p>Executes AGI Command &#34;SET CALLERID $number&#34;</p>

<p>Changes the callerid of the current channel to &#60;number&#62;</p>

<p>Example: $AGI-&#62;set_callerid(&#39;9995551212&#39;);</p>

<p>Returns: Always returns 1</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_context($context)"
>$AGI-&#62;set_context($context)</a></dt>

<dd>
<p>Executes AGI Command &#34;SET CONTEXT $context&#34;</p>

<p>Changes the context for continuation upon exiting the agi application</p>

<p>Example: $AGI-&#62;set_context(&#39;dialout&#39;);</p>

<p>Returns: Always returns 0</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_extension($extension)"
>$AGI-&#62;set_extension($extension)</a></dt>

<dd>
<p>Executes AGI Command &#34;SET EXTENSION $extension&#34;</p>

<p>Changes the extension for continuation upon exiting the agi application</p>

<p>Example: $AGI-&#62;set_extension(&#39;7&#39;);</p>

<p>Returns: Always returns 0</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_music($mode_[,_$class])"
>$AGI-&#62;set_music($mode [, $class])</a></dt>

<dd>
<p>Executes AGI Command &#34;SET MUSIC $mode $class&#34;</p>

<p>Enables/Disables the music on hold generator. If $class is not specified, then the default music on hold class will be used. $mode must be &#34;on&#34; or &#34;off&#34;.</p>

<p>Example: $AGI-&#62;set_music(&#34;on&#34;, &#34;happy&#34;); $AGI-&#62;set_music(&#34;off&#34;);</p>

<p>Returns: -1 on hangup or error, 0 otherwise.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_priority($priority)"
>$AGI-&#62;set_priority($priority)</a></dt>

<dd>
<p>Executes AGI Command &#34;SET PRIORITY $priority&#34;</p>

<p>Changes the priority for continuation upon exiting the agi application</p>

<p>Example: $AGI-&#62;set_priority(1);</p>

<p>Returns: Always returns 0</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;set_variable($variable,_$value)"
>$AGI-&#62;set_variable($variable, $value)</a></dt>

<dd>
<p>Executes AGI Command &#34;SET VARIABLE $variable $value&#34;</p>

<p>Sets the channel variable &#60;variablename&#62; to &#60;value&#62;</p>

<p>Example: $AGI-&#62;set_variable(&#39;status&#39;, &#39;authorized&#39;);</p>

<p>Returns: Always returns 1</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;stream_file($filename,_$digits,_$offset)"
>$AGI-&#62;stream_file($filename, $digits, $offset)</a></dt>

<dd>
<p>Executes AGI Command &#34;STREAM FILE $filename $digits [$offset]&#34;</p>

<p>This command instructs Asterisk to play the given sound file and listen for the given dtmf digits. The fileextension must not be used in the filename because Asterisk will find the most appropriate file type. $filename can be an array of files or a single filename.</p>

<p>Example: $AGI-&#62;stream_file(&#39;demo-echotest&#39;, &#39;0123&#39;); $AGI-&#62;stream_file([&#39;demo-echotest&#39;, &#39;demo-welcome&#39;], &#39;0123&#39;);</p>

<p>Returns: -1 on error or hangup, 0 if playback completes without a digit being pressed, or the ASCII numerical value of the digit if a digit was pressed</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;tdd_mode($mode)"
>$AGI-&#62;tdd_mode($mode)</a></dt>

<dd>
<p>Executes AGI Command &#34;TDD MODE &#60;on|off&#62;&#34;</p>

<p>Enable/Disable TDD transmission/reception on a channel.</p>

<p>Example: $AGI-&#62;tdd_mode(&#39;on&#39;);</p>

<p>Returns: Returns 1 if successful, or 0 if channel is not TDD-capable.</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;verbose($message,_$level)"
>$AGI-&#62;verbose($message, $level)</a></dt>

<dd>
<p>Executes AGI Command &#34;VERBOSE $message $level&#34;</p>

<p>Logs $message with verboselevel $level</p>

<p>Example: $AGI-&#62;verbose(&#34;System Crashed&#34;, 1);</p>

<p>Returns: Always returns 1</p>

<dt><a name='AGI'></a><a name="$AGI-&#62;wait_for_digit($timeout)"
>$AGI-&#62;wait_for_digit($timeout)</a></dt>

<dd>
<p>Executes AGI Command &#34;WAIT FOR DIGIT $timeout&#34;</p>

<p>Waits up to &#39;timeout&#39; milliseconds for channel to receive a DTMF digit.</p>

<p>Use -1 for the timeout value if you desire the call to block indefinitely.</p>

<p>Example: $AGI-&#62;wait_for_digit($timeout);</p>

<p>Returns: Returns -1 on channel failure, 0 if no digit is received in the timeout, or the numerical value of the ascii of the digit if one is received.</p>
</dd>
</dl>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78177 Uploads, 24708 Distributions
105988 Modules, 9645 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Wed Apr 25 02:41:35 2012 GMT (0.12699294090271) @cpansearch1 -->
 </body>
</html>
