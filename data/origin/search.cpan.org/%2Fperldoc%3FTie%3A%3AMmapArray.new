<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>Tie::MmapArray - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","Tie-MmapArray",3]);
    _gaq.push(["_setCustomVar",5,"Release","Tie-MmapArray-0.04",3]);
    _gaq.push(["_setCustomVar",3,"Module","Tie::MmapArray",3]);
    _gaq.push(["_setCustomVar",1,"Author","ANDREWF",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?Tie::MmapArray">permalink</a></div>
  <a href="/~andrewf/">Andrew Ford</a> &gt;
  <a href="/~andrewf/Tie-MmapArray-0.04/">Tie-MmapArray-0.04</a> &gt;
  Tie::MmapArray
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/cf4da73d20e35212f8203a1d14cdc691?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/A/AN/ANDREWF/Tie-MmapArray-0.04.tar.gz">Tie-MmapArray-0.04.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=Tie%3A%3AMmapArray;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~ANDREWF/Tie-MmapArray-0.04/MmapArray.pm">Annotate this POD
</a></p>
<div class=box style='width:150px; float: right'>
<h1 class=t5>Related Modules</h1>
<div style="margin:2px">
<a href="/perldoc?Tie%3A%3AIxHash">Tie::IxHash</a><br>
<a href="/perldoc?Tie%3A%3AFile">Tie::File</a><br>
<small>
<a href="http://perlmonks.org/?node=cpan+module+search&pivot=1&module=Tie%3A%3AMmapArray">more...</a><br>
By <a href="http://perlmonks.org/">perlmonks.org</a></small>
</div>
</div>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 1</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 0</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=Tie-MmapArray">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  0.04 &nbsp;
<span class="noprint">
  <a href="/src/ANDREWF/Tie-MmapArray-0.04/MmapArray.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#BUGS,_RESTRICTIONS_AND_FUTURE_DIRECTIONS'>BUGS, RESTRICTIONS AND FUTURE DIRECTIONS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#CREDITS'>CREDITS</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Tie::MmapArray - mmap a file as a tied array</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl">    use Tie::MmapArray;

    tie @array, &#39;Tie::MmapArray&#39;, $filename;
    tie @array, &#39;Tie::MmapArray&#39;, $filename, $template;
    tie @array, &#39;Tie::MmapArray&#39;, $filename, { template =&#62; $template,
                                               nels     =&#62; 0,
                                               mode     =&#62; &#34;rw&#34;,
                                               shared   =&#62; 1,
                                               offset   =&#62; 0 };

    $len = (tied @array)-&#62;record_size;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>The Tie::MmapArray module lets you use mmap to map in a file as a perl array rather than reading the file into dynamically allocated memory. It depends on your operating system supporting UNIX or POSIX.1b mmap, of course. (Code to use the equivalent functions on Win32 platforms has been contributed but has not been tested yet.)</p>

<p>The type of array elements is defined by the <i>template</i> argument or option. This is a Perl pack()-style template, which defaults to &#34;i&#34;. The template may be an array reference, in which case the elements are defined by pairs of name and template for each element. A template string may define multiple fields, in which case that element is regarded as an array of fields (which need not be of the same type).</p>

<p>The following example shows the utmp file on Linux mapped to an array:</p>

<pre class="sh_perl">    tie @utmp, &#39;Tie::MmapArray&#39;, &#39;/var/log/utmp&#39;,
        { mode     =&#62; &#34;rw&#34;,
          template =&#62; [ ut_type    =&#62; &#39;s&#39;,
                        ut_pid     =&#62; &#39;i&#39;,      # pid_t
                        ut_line    =&#62; &#39;a12&#39;,
                        ut_id      =&#62; &#39;a4&#39;,
                        ut_user    =&#62; &#39;a32&#39;,
                        ut_host    =&#62; &#39;a256&#39;,
                        ut_exit    =&#62; [ # struct exit_status
                                        e_termination =&#62; &#39;s&#39;,
                                        e_exit        =&#62; &#39;s&#39; ],
                        ut_session =&#62; &#39;l&#39;,
                        ut_tv      =&#62; [ # struct timeval
                                        tv_sec  =&#62; &#39;l&#39;,
                                        tv_usec =&#62; &#39;l&#39; ],
                        ut_addr_v6 =&#62; &#39;l4&#39;,
                        pad        =&#62; &#39;a20&#39; ] };</pre>

<p>This can be scanned as follows:</p>

<pre class="sh_perl">    for (my $i = 0; $i &#60; @utmp; $i++) {
        printf(&#34;pid: %d, user: %s\n&#34;,
               $utmp[$i]-&#62;{ut_pid}, $utmp[$i]-&#62;{ut_user});
    }</pre>

<p>The following subset of pack() template letters is supported:</p>

<dl>
<dt><a name="i"
>i</a></dt>

<dd>
<p>signed integer (default)</p>

<dt><a name="I"
>I</a></dt>

<dd>
<p>unsigned integer</p>

<dt><a name="c"
>c</a></dt>

<dd>
<p>signed character (one byte integer)</p>

<dt><a name="c"
>c</a></dt>

<dd>
<p>unsigned character (one byte integer)</p>

<dt><a name="s"
>s</a></dt>

<dd>
<p>signed short integer</p>

<dt><a name="S"
>S</a></dt>

<dd>
<p>unsigned short integer</p>

<dt><a name="n"
>n</a></dt>

<dd>
<p>unsigned short integer in network byte order</p>

<dt><a name="l"
>l</a></dt>

<dd>
<p>signed long integer</p>

<dt><a name="L"
>L</a></dt>

<dd>
<p>unsigned long integer</p>

<dt><a name="N"
>N</a></dt>

<dd>
<p>unsigned long integer in network byte order</p>

<dt><a name="f"
>f</a></dt>

<dd>
<p>float</p>

<dt><a name="d"
>d</a></dt>

<dd>
<p>double</p>

<dt><a name="aN"
>a<i>N</i></a></dt>

<dd>
<p>fixed-length, null-padded ASCII string of length <i>N</i></p>

<dt><a name="AN"
>A<i>N</i></a></dt>

<dd>
<p>fixed-length, space-padded ASCII string of length <i>N</i></p>

<dt><a name="ZN"
>Z<i>N</i></a></dt>

<dd>
<p>fixed-length, null-terminated ASCII string of length <i>N</i></p>
</dd>
</dl>

<p>The size of the array is defined by the <i>nels</i> option. If this is zero then it is calculated as the file size divided by the element size.</p>

<p>If the file size is smaller than the size required for the requested elements then a single zero byte will be written to the final byte of the requested size. This seems to prevent the module dying with a segmentation or bus error if memory is accessed beyond the end of the file and generally results in a file with holes (unallocated blocks). Precise details of the behaviour of the module are subject to change.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS,_RESTRICTIONS_AND_FUTURE_DIRECTIONS"
>BUGS, RESTRICTIONS AND FUTURE DIRECTIONS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This is version 0.02 of the module and there are likely to be many bugs. The interface may change as the result of feedback.</p>

<p>The options <i>mode</i> and <i>shared</i> are not yet used.</p>

<p>Not all pack letters are implemented yet.</p>

<p>push, pop, shift, unshift, and splice operations are not yet supported. It is debateable whether they should be as they could be very expensive if the mmaped file was large (say a Gigabyte or two). Perhaps there should be an option to explicitly allow these operations.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Andrew Ford &#60;A.Ford@ford-mason.co.uk&#62;, 27 December 1999.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CREDITS"
>CREDITS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>The module was inspired by Malcolm Beatie&#39;s Mmap module.</p>

<p>Reini Urban &#60;rurban@x-ray.at&#62; provided intial code for Win32 platforms.</p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78269 Uploads, 24724 Distributions
106002 Modules, 9649 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Fri Apr 27 22:10:54 2012 GMT (0.101402997970581) @cpansearch1 -->
 </body>
</html>
