<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>MooseX::Storage - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","MooseX-Storage",3]);
    _gaq.push(["_setCustomVar",5,"Release","MooseX-Storage-0.31",3]);
    _gaq.push(["_setCustomVar",3,"Module","MooseX::Storage",3]);
    _gaq.push(["_setCustomVar",1,"Author","BOBTFISH",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?MooseX::Storage">permalink</a></div>
  <a href="/~bobtfish/">Tomas Doran</a> &gt;
  <a href="/~bobtfish/MooseX-Storage-0.31/">MooseX-Storage-0.31</a> &gt;
  MooseX::Storage
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/d7a84fd18529fb8ba3a05cede8ea5dcc?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/B/BO/BOBTFISH/MooseX-Storage-0.31.tar.gz">MooseX-Storage-0.31.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=MooseX%3A%3AStorage;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~BOBTFISH/MooseX-Storage-0.31/lib/MooseX/Storage.pm">Annotate this POD
</a></p>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 6</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 6</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=MooseX-Storage">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  0.31 &nbsp;
<span class="noprint">
  <a href="/src/BOBTFISH/MooseX-Storage-0.31/lib/MooseX/Storage.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Important_Note'>Important Note</a>
    <li class='indexItem indexItem2'><a href='#Levels_of_Serialization'>Levels of Serialization</a>
    <li class='indexItem indexItem2'><a href='#Behaviour_modifiers'>Behaviour modifiers</a>
    <li class='indexItem indexItem2'><a href='#How_we_serialize'>How we serialize</a>
    <li class='indexItem indexItem2'><a href='#What_can_be_serialized?'>What can be serialized?</a>
    <li class='indexItem indexItem2'><a href='#What_can_not_be_serialized?'>What can not be serialized?</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CAVEAT'>CAVEAT</a>
  <li class='indexItem indexItem1'><a href='#EXPORTS'>EXPORTS</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Introspection'>Introspection</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TODO'>TODO</a>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>MooseX::Storage - A serialization framework for Moose classes</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl">  package Point;
  use Moose;
  use MooseX::Storage;

  our $VERSION = &#39;0.01&#39;;

  with Storage(&#39;format&#39; =&#62; &#39;JSON&#39;, &#39;io&#39; =&#62; &#39;File&#39;);

  has &#39;x&#39; =&#62; (is =&#62; &#39;rw&#39;, isa =&#62; &#39;Int&#39;);
  has &#39;y&#39; =&#62; (is =&#62; &#39;rw&#39;, isa =&#62; &#39;Int&#39;);

  1;

  my $p = Point-&#62;new(x =&#62; 10, y =&#62; 10);

  ## methods to pack/unpack an
  ## object in perl data structures

  # pack the class into a hash
  $p-&#62;pack(); # { __CLASS__ =&#62; &#39;Point-0.01&#39;, x =&#62; 10, y =&#62; 10 }

  # unpack the hash into a class
  my $p2 = Point-&#62;unpack({ __CLASS__ =&#62; &#39;Point-0.01&#39;, x =&#62; 10, y =&#62; 10 });

  ## methods to freeze/thaw into
  ## a specified serialization format
  ## (in this case JSON)

  # pack the class into a JSON string
  $p-&#62;freeze(); # { &#34;__CLASS__&#34; : &#34;Point-0.01&#34;, &#34;x&#34; : 10, &#34;y&#34; : 10 }

  # unpack the JSON string into a class
  my $p2 = Point-&#62;thaw(&#39;{ &#34;__CLASS__&#34; : &#34;Point-0.01&#34;, &#34;x&#34; : 10, &#34;y&#34; : 10 }&#39;);

  ## methods to load/store a class
  ## on the file system

  $p-&#62;store(&#39;my_point.json&#39;);

  my $p2 = Point-&#62;load(&#39;my_point.json&#39;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>MooseX::Storage is a serialization framework for Moose, it provides a very flexible and highly pluggable way to serialize Moose classes to a number of different formats and styles.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Important_Note"
>Important Note</a></h2>

<p>This is still an early release of this module, so use with caution. It&#39;s outward facing serialization API should be considered stable, but I still reserve the right to make tweaks if I need too. Anything beyond the basic pack/unpack, freeze/thaw and load/store should not be relied on.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Levels_of_Serialization"
>Levels of Serialization</a></h2>

<p>There are 3 levels to the serialization, each of which builds upon the other and each of which can be customized to the specific needs of your class.</p>

<dl>
<dt><a name="base"
><b>base</b></a></dt>

<dd>
<p>The first (base) level is <code>pack</code> and <code>unpack</code>. In this level the class is serialized into a Perl HASH reference, it is tagged with the class name and each instance attribute is stored. Very simple.</p>

<p>This level is not optional, it is the bare minumum that MooseX::Storage provides and all other levels build on top of this.</p>

<p>See <a href="/~bobtfish/MooseX-Storage-0.31/lib/MooseX/Storage/Basic.pm" class="podlinkpod"
>MooseX::Storage::Basic</a> for the fundamental implementation and options to <code>pack</code> and <code>unpack</code></p>

<dt><a name="format"
><b>format</b></a></dt>

<dd>
<p>The second (format) level is <code>freeze</code> and <code>thaw</code>. In this level the output of <code>pack</code> is sent to <code>freeze</code> or the output of <code>thaw</code> is sent to <code>unpack</code>. This levels primary role is to convert to and from the specific serialization format and Perl land.</p>

<p>This level is optional, if you don&#39;t want/need it, you don&#39;t have to have it. You can just use <code>pack</code>/<code>unpack</code> instead.</p>

<dt><a name="io"
><b>io</b></a></dt>

<dd>
<p>The third (io) level is <code>load</code> and <code>store</code>. In this level we are reading and writing data to file/network/database/etc.</p>

<p>This level is also optional, in most cases it does require a <code>format</code> role to also be used, the exception being the <code>StorableFile</code> role.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Behaviour_modifiers"
>Behaviour modifiers</a></h2>

<p>The serialization behaviour can be changed by supplying <code>traits</code>. This can be done as follows:</p>

<pre class="sh_perl">  use MooseX::Storage;
  with Storage( traits =&#62; [Trait1, Trait2,...] );</pre>

<p>The following traits are currently bundled with <code>MooseX::Storage</code>:</p>

<dl>
<dt><a name="OnlyWhenBuilt"
>OnlyWhenBuilt</a></dt>

<dd>
<p>Only attributes that have been built (ie, where the predicate returns &#39;true&#39;) will be serialized. This avoids any potentially expensive computations.</p>

<p>See <a href="/~bobtfish/MooseX-Storage-0.31/lib/MooseX/Storage/Traits/OnlyWhenBuilt.pm" class="podlinkpod"
>MooseX::Storage::Traits::OnlyWhenBuilt</a> for details.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="How_we_serialize"
>How we serialize</a></h2>

<p>There are always limits to any serialization framework, there are just some things which are really difficult to serialize properly and some things which cannot be serialized at all.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="What_can_be_serialized?"
>What can be serialized?</a></h2>

<p>Currently only numbers, string, ARRAY refs, HASH refs and other MooseX::Storage enabled objects are supported.</p>

<p>With Array and Hash references the first level down is inspected and any objects found are serialized/deserialized for you. We do not do this recusively by default, however this feature may become an option eventually.</p>

<p>The specific serialize/deserialize routine is determined by the Moose type constraint a specific attribute has. In most cases subtypes of the supported types are handled correctly, and there is a facility for adding handlers for custom types as well. This will get documented eventually, but it is currently still in development.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="What_can_not_be_serialized?"
>What can not be serialized?</a></h2>

<p>We do not support CODE references yet, but this support might be added in using B::Deparse or some other deep magic.</p>

<p>Scalar refs are not supported, mostly because there is no way to know if the value being referenced will be there when the object is inflated. I highly doubt will be ever support this in a general sense, but it would be possible to add this yourself for a small specific case.</p>

<p>Circular references are specifically disallowed, however if you break the cycles yourself then re-assemble them later you can get around this. The reason we disallow circular refs is because they are not always supported in all formats we use, and they tend to be very tricky to do for all possible cases. It is almost always something you want to have tight control over anyway.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEAT"
>CAVEAT <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This is <b>not</b> a persistence framework; changes to your object after you load or store it will not be reflected in the stored class.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXPORTS"
>EXPORTS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<dl>
<dt><a name='Storage'></a><a name="Storage_(%options)"
><b>Storage (%options)</b></a></dt>

<dd>
<p>This module will export the <code>Storage</code> method and can be used to load a specific set of MooseX::Storage roles to implement a specific combination of features. It is meant to make things easier, but it is by no means the only way. You can still compose your roles by hand if you like.</p>

<p>By default, options are assumed to be short forms. For example, this:</p>

<pre class="sh_perl">  Storage(format =&#62; &#39;JSON&#39;);</pre>

<p>...will result in looking for MooseX::Storage::Format::JSON. To use a role that is not under the default namespace prefix, start with an equal sign:</p>

<pre class="sh_perl">  Storage(format =&#62; &#39;=My::Private::JSONFormat&#39;);</pre>

<p>To use a parameterized role (for which, see <a href="/perldoc?MooseX%3A%3ARole%3A%3AParameterized" class="podlinkpod"
>MooseX::Role::Parameterized</a>) you can pass an arrayref of the role name (in short or long form, as above) and its parameters:</p>

<pre class="sh_perl">  Storage(format =&#62; [ JSONpm =&#62; { json_opts =&#62; { pretty =&#62; 1 } } ]);</pre>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<dl>
<dt><a name="import"
><b>import</b></a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Introspection"
>Introspection</a></h2>

<dl>
<dt><a name="meta"
><b>meta</b></a></dt>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TODO"
>TODO <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This module needs docs and probably a Cookbook of some kind as well. This is an early release, so that is my excuse for now :)</p>

<p>For the time being, please read the tests and feel free to email me if you have any questions. This module can also be discussed on IRC in the #moose channel on irc.perl.org.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>All complex software has bugs lurking in it, and this module is no exception. If you find a bug please either email me, or add the bug to cpan-RT.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Chris Prather &#60;chris.prather@iinteractive.com&#62;</p>

<p>Stevan Little &#60;stevan.little@iinteractive.com&#62;</p>

<p>Yuval Kogman &#60;yuval.kogman@iinteractive.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Copyright 2007-2008 by Infinity Interactive, Inc.</p>

<p><a href="http://www.iinteractive.com" class="podlinkurl"
>http://www.iinteractive.com</a></p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78068 Uploads, 24686 Distributions
105902 Modules, 9637 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Sun Apr 22 11:46:52 2012 GMT (0.188545942306519) @cpansearch1 -->
 </body>
</html>
