<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>Net::DNS::Update - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","Net-DNS",3]);
    _gaq.push(["_setCustomVar",5,"Release","Net-DNS-0.68",3]);
    _gaq.push(["_setCustomVar",3,"Module","Net::DNS::Update",3]);
    _gaq.push(["_setCustomVar",1,"Author","OLAF",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?Net::DNS::Update">permalink</a></div>
  <a href="/~olaf/">OLAF</a> &gt;
  <a href="/~olaf/Net-DNS-0.68/">Net-DNS-0.68</a> &gt;
  Net::DNS::Update
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/e5747bf50b65faa67ee4828a0466d66d?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/O/OL/OLAF/Net-DNS-0.68.tar.gz">Net-DNS-0.68.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=Net%3A%3ADNS%3A%3AUpdate;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~OLAF/Net-DNS-0.68/lib/Net/DNS/Update.pm">Annotate this POD
</a></p>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 2</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 8</td></tr>
<tr><td>Stalled&nbsp;</td><td style="text-align:right"> 5</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=Net-DNS">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  970 &nbsp;
<span class="noprint">
  <a href="/src/OLAF/Net-DNS-0.68/lib/Net/DNS/Update.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXAMPLES'>EXAMPLES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Add_a_new_host'>Add a new host</a>
    <li class='indexItem indexItem2'><a href='#Add_an_MX_record_for_a_name_that_already_exists'>Add an MX record for a name that already exists</a>
    <li class='indexItem indexItem2'><a href='#Add_a_TXT_record_for_a_name_that_doesn&#39;t_exist'>Add a TXT record for a name that doesn&#39;t exist</a>
    <li class='indexItem indexItem2'><a href='#Delete_all_A_records_for_a_name'>Delete all A records for a name</a>
    <li class='indexItem indexItem2'><a href='#Delete_all_RRs_for_a_name'>Delete all RRs for a name</a>
    <li class='indexItem indexItem2'><a href='#Perform_a_signed_update'>Perform a signed update</a>
    <li class='indexItem indexItem2'><a href='#Another_way_to_perform_a_signed_update'>Another way to perform a signed update</a>
    <li class='indexItem indexItem2'><a href='#Perform_a_signed_update_with_a_customized_TSIG_record'>Perform a signed update with a customized TSIG record</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Net::DNS::Update - Create a DNS update packet</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl">    use Net::DNS::Update;

    $update = Net::DNS::Update-&#62;new;
    $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;, &#39;IN&#39;);

    $update-&#62;push(prerequisite =&#62; nxrrset(&#39;foo.example.com. A&#39;));
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com. 86400 A 192.168.1.2&#39;));</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p><code>Net::DNS::Update</code> is a subclass of <code>Net::DNS::Packet</code>, to be used for making DNS dynamic updates. Programmers should refer to RFC 2136 for the semantics of dynamic updates.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
>new</a></h2>

<pre class="sh_perl">    $update = Net::DNS::Update-&#62;new;
    $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;, &#39;HS&#39;);</pre>

<p>Returns a <code>Net::DNS::Update</code> object used to perform a DNS dynamic update operation. Specifically, it creates a packet with the header opcode set to UPDATE and zone qtype to SOA (per RFC 2136, 2.3).</p>

<p>Programs must use the <code>push</code> method to add RRs to the prerequisite, update, and additional sections before performing the update.</p>

<p>Arguments are the zone name and the class. If the zone is omitted, the default domain will be taken from the resolver configuration. If the class is omitted, it defaults to IN.</p>

<p>Future versions of <code>Net::DNS</code> may provide a simpler interface for making dynamic updates.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>The first example below shows a complete program; subsequent examples show only the creation of the update packet.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Add_a_new_host"
>Add a new host</a></h2>

<pre class="sh_perl">    #!/usr/bin/perl -w

    use strict;
    use Net::DNS;

    # Create the update packet.
    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);

    # Prerequisite is that no A records exist for the name.
    $update-&#62;push(prerequisite =&#62; nxrrset(&#39;foo.example.com. A&#39;));

    # Add two A records for the name.
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com. 86400 A 192.168.1.2&#39;));
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com. 86400 A 172.16.3.4&#39;));

    # Send the update to the zone&#39;s primary master.
    my $res = Net::DNS::Resolver-&#62;new;
    $res-&#62;nameservers(&#39;primary-master.example.com&#39;);

    my $reply = $res-&#62;send($update);

    # Did it work?
    if ($reply) {
        my $rcode = $reply-&#62;header-&#62;rcode;
        print &#39;Update &#39;, $rcode eq &#39;NOERROR&#39; ? &#34;succeeded\n&#34; : &#34;failed: $rcode\n&#34;;
    } else {
        print &#39;Update failed: &#39;, $res-&#62;errorstring, &#34;\n&#34;;
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Add_an_MX_record_for_a_name_that_already_exists"
>Add an MX record for a name that already exists</a></h2>

<pre class="sh_perl">    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; yxdomain(&#39;example.com&#39;));
    $update-&#62;push(update       =&#62; rr_add(&#39;example.com MX 10 mailhost.example.com&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Add_a_TXT_record_for_a_name_that_doesn&#39;t_exist"
>Add a TXT record for a name that doesn&#39;t exist</a></h2>

<pre class="sh_perl">    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; nxdomain(&#39;info.example.com&#39;));
    $update-&#62;push(update       =&#62; rr_add(&#39;info.example.com TXT &#34;yabba dabba doo&#34;&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Delete_all_A_records_for_a_name"
>Delete all A records for a name</a></h2>

<pre class="sh_perl">    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; yxrrset(&#39;foo.example.com A&#39;));
    $update-&#62;push(update       =&#62; rr_del(&#39;foo.example.com A&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Delete_all_RRs_for_a_name"
>Delete all RRs for a name</a></h2>

<pre class="sh_perl">    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(prerequisite =&#62; yxdomain(&#39;byebye.example.com&#39;));
    $update-&#62;push(update       =&#62; rr_del(&#39;byebye.example.com&#39;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perform_a_signed_update"
>Perform a signed update</a></h2>

<pre class="sh_perl">    my $key_name = &#39;tsig-key&#39;;
    my $key_data = &#39;awwLOtRfpGE+rRKF2+DEiw==&#39;;

    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(update =&#62; rr_add(&#39;foo.example.com A 10.1.2.3&#39;));
    $update-&#62;push(update =&#62; rr_add(&#39;bar.example.com A 10.4.5.6&#39;));
    $update-&#62;sign_tsig($key_name, $key_data);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Another_way_to_perform_a_signed_update"
>Another way to perform a signed update</a></h2>

<pre class="sh_perl">    my $key_name = &#39;tsig-key&#39;;
    my $key_data = &#39;awwLOtRfpGE+rRKF2+DEiw==&#39;;

    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(update     =&#62; rr_add(&#39;foo.example.com A 10.1.2.3&#39;));
    $update-&#62;push(update     =&#62; rr_add(&#39;bar.example.com A 10.4.5.6&#39;));
    $update-&#62;push(additional =&#62; Net::DNS::RR-&#62;new(&#34;$key_name TSIG $key_data&#34;));</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perform_a_signed_update_with_a_customized_TSIG_record"
>Perform a signed update with a customized TSIG record</a></h2>

<pre class="sh_perl">    my $key_name = &#39;tsig-key&#39;;
    my $key_data = &#39;awwLOtRfpGE+rRKF2+DEiw==&#39;;

    my $tsig = Net::DNS::RR-&#62;new(&#34;$key_name TSIG $key_data&#34;);
    $tsig-&#62;fudge(60);

    my $update = Net::DNS::Update-&#62;new(&#39;example.com&#39;);
    $update-&#62;push(update     =&#62; rr_add(&#39;foo.example.com A 10.1.2.3&#39;));
    $update-&#62;push(update     =&#62; rr_add(&#39;bar.example.com A 10.4.5.6&#39;));
    $update-&#62;push(additional =&#62; $tsig);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>WARNING: This code is still under development. Please use with caution on production nameservers.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Copyright (c)1997-2002 Michael Fuhr.</p>

<p>Portions Copyright (c)2002-2004 Chris Reinhardt.</p>

<p>All rights reserved.</p>

<p>This program is free software; you may redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p><a href="/perldoc?perl" class="podlinkpod"
>perl</a>, <a href="/~olaf/Net-DNS-0.68/lib/Net/DNS.pm" class="podlinkpod"
>Net::DNS</a>, <a href="/~olaf/Net-DNS-0.68/lib/Net/DNS/Resolver.pm" class="podlinkpod"
>Net::DNS::Resolver</a>, <a href="/~olaf/Net-DNS-0.68/lib/Net/DNS/Header.pm" class="podlinkpod"
>Net::DNS::Header</a>, <a href="/~olaf/Net-DNS-0.68/lib/Net/DNS/Packet.pm" class="podlinkpod"
>Net::DNS::Packet</a>, <a href="/~olaf/Net-DNS-0.68/lib/Net/DNS/Question.pm" class="podlinkpod"
>Net::DNS::Question</a>, <a href="/~olaf/Net-DNS-0.68/lib/Net/DNS/RR.pm" class="podlinkpod"
>Net::DNS::RR</a>, RFC 2136, RFC 2845</p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78184 Uploads, 24708 Distributions
105990 Modules, 9645 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Wed Apr 25 04:56:16 2012 GMT (0.0358428955078125) @cpansearch1 -->
 </body>
</html>
