<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
 <head>
  <link rel="stylesheet" href="http://st.pimg.net/tucs/style.css" type="text/css" />
<style>
.styleswitch {
  text-align: right;
}
</style>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_main.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/sh_perl.min.js"></script>
<script type="text/javascript" src="http://st.pimg.net/tucs/js/jquery.styleswitch.js"></script>

<link rel="stylesheet" href="http://st.pimg.net/tucs/print.css" type="text/css" media="print" />
  <link rel="alternate" type="application/rss+xml" title="RSS 1.0" href="http://search.cpan.org/uploads.rdf" />
  <link rel="search" href="http://st.pimg.net/tucs/opensearch.xml" type="application/opensearchdescription+xml" title="SearchCPAN" />
  <title>File::Slurp - search.cpan.org</title>
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3528438-1']);
    _gaq.push(["_setCustomVar",2,"Distribution","File-Slurp",3]);
    _gaq.push(["_setCustomVar",5,"Release","File-Slurp-9999.19",3]);
    _gaq.push(["_setCustomVar",3,"Module","File::Slurp",3]);
    _gaq.push(["_setCustomVar",1,"Author","URI",3]);
    _gaq.push(['_trackPageview']);
  </script>
 </head>
 <body id="cpansearch">
<center><div class="logo"><a href="/"><img src="http://st.pimg.net/tucs/img/cpan_banner.png" alt="CPAN"></a></div></center>
<div class="menubar">
 <a href="/">Home</a>
&middot; <a href="/author/">Authors</a>
&middot; <a href="/recent">Recent</a>
&middot; <a href="http://log.perl.org/cpansearch/">News</a>
&middot; <a href="/mirror">Mirrors</a>
&middot; <a href="/faq.html">FAQ</a>
&middot; <a href="/feedback">Feedback</a>
</div>
<form method="get" action="/search" name="f" class="searchbox">
<input type="text" name="query" value="" size="35">
<br>in <select name="mode">
 <option value="all">All</option>
 <option value="module" >Modules</option>
 <option value="dist" >Distributions</option>
 <option value="author" >Authors</option>
</select>&nbsp;<input type="submit" value="CPAN Search">
</form>


 <a name="_top"></a>
  <div class=path>
<div id=permalink class="noprint"><a href="/perldoc?File::Slurp">permalink</a></div>
  <a href="/~uri/">Uri Guttman</a> &gt;
  <a href="/~uri/File-Slurp-9999.19/">File-Slurp-9999.19</a> &gt;
  File::Slurp
 </div>

<div class="noprint" style="float:right;align:left;width:19ex">
<a href="http://hexten.net/cpan-faces/"><img src="http://www.gravatar.com/avatar/b8abc80c49a183429d5a3ec398abceca?r=g&s=80&d=http%3A%2F%2Fst.pimg.net%2Ftucs%2Fimg%2Fwho.png" width=80 height=80 
style="float:right"
/></a>
<br style="clear:both"/>
<p style="text-align:right">Download:<br/> <a href="/CPAN/authors/id/U/UR/URI/File-Slurp-9999.19.tar.gz">File-Slurp-9999.19.tar.gz</a></p>
<p style="text-align:right"><a href="http://deps.cpantesters.org/?module=File%3A%3ASlurp;perl=latest">Dependencies</a></p>
<p style="text-align:right"><a href="http://www.annocpan.org/~URI/File-Slurp-9999.19/lib/File/Slurp.pm">Annotate this POD
(2)
</a></p>
<div class=box style='width:150px; float: right'>
<h1 class=t5>Related Modules</h1>
<div style="margin:2px">
<a href="/perldoc?File%3A%3AFind">File::Find</a><br>
<a href="/perldoc?XML%3A%3ASimple">XML::Simple</a><br>
<a href="/perldoc?Data%3A%3ADumper">Data::Dumper</a><br>
<a href="/perldoc?HTML%3A%3ATemplate">HTML::Template</a><br>
<a href="/perldoc?CGI%3A%3AApplication">CGI::Application</a><br>
<a href="/perldoc?Parse%3A%3ARecDescent">Parse::RecDescent</a><br>
<a href="/perldoc?Tie%3A%3AFile">Tie::File</a><br>
<a href="/perldoc?Class%3A%3ADBI">Class::DBI</a><br>
<a href="/perldoc?List%3A%3AUtil">List::Util</a><br>
<a href="/perldoc?WWW%3A%3AMechanize">WWW::Mechanize</a><br>
<small>
<a href="http://perlmonks.org/?node=cpan+module+search&pivot=1&module=File%3A%3ASlurp">more...</a><br>
By <a href="http://perlmonks.org/">perlmonks.org</a></small>
</div>
</div>

<div style="float:right">
<div class=box style='width:150px'>
<h1 class=t5>CPAN RT</h1>
<div style="margin:2px">
<table style="margin-left:auto;margin-right:auto">
<tr><td>New&nbsp;</td><td style="text-align:right"> 7</td></tr>
<tr><td>Open&nbsp;</td><td style="text-align:right"> 3</td></tr>
</table>
<a href="https://rt.cpan.org/Public/Dist/Display.html?Name=File-Slurp">View/Report Bugs</a><br/>
</div>
</div>

</div>
</div>
  Module Version:  9999.19 &nbsp;
<span class="noprint">
  <a href="/src/URI/File-Slurp-9999.19/lib/File/Slurp.pm">Source</a> &nbsp;
</span>
<a name="___top"></a>
<div class=pod>
<div class=toc>
<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#read_file'>read_file</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#binmode'>binmode</a>
      <li class='indexItem indexItem3'><a href='#array_ref'>array_ref</a>
      <li class='indexItem indexItem3'><a href='#chomp'>chomp</a>
      <li class='indexItem indexItem3'><a href='#scalar_ref'>scalar_ref</a>
      <li class='indexItem indexItem3'><a href='#buf_ref'>buf_ref</a>
      <li class='indexItem indexItem3'><a href='#blk_size'>blk_size</a>
      <li class='indexItem indexItem3'><a href='#err_mode'>err_mode</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#write_file'>write_file</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#binmode'>binmode</a>
      <li class='indexItem indexItem3'><a href='#perms'>perms</a>
      <li class='indexItem indexItem3'><a href='#buf_ref'>buf_ref</a>
      <li class='indexItem indexItem3'><a href='#atomic'>atomic</a>
      <li class='indexItem indexItem3'><a href='#append'>append</a>
      <li class='indexItem indexItem3'><a href='#no_clobber'>no_clobber</a>
      <li class='indexItem indexItem3'><a href='#err_mode'>err_mode</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#overwrite_file'>overwrite_file</a>
    <li class='indexItem indexItem2'><a href='#append_file'>append_file</a>
    <li class='indexItem indexItem2'><a href='#prepend_file'>prepend_file</a>
    <li class='indexItem indexItem2'><a href='#edit_file,_edit_file_lines'>edit_file, edit_file_lines</a>
    <li class='indexItem indexItem2'><a href='#read_dir'>read_dir</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#err_mode'>err_mode</a>
      <li class='indexItem indexItem3'><a href='#keep_dot_dot'>keep_dot_dot</a>
      <li class='indexItem indexItem3'><a href='#prefix'>prefix</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#EXPORT'>EXPORT</a>
    <li class='indexItem indexItem2'><a href='#LICENSE'>LICENSE</a>
    <li class='indexItem indexItem2'><a href='#SEE_ALSO'>SEE ALSO</a>
    <li class='indexItem indexItem2'><a href='#BUGS'>BUGS</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
</ul>
</div>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>File::Slurp - Simple and Efficient Reading/Writing/Modifying of Complete Files</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<pre class="sh_perl">  use File::Slurp;</pre>

<p># read in a whole file into a scalar my $text = read_file( &#39;filename&#39; ) ;</p>

<p># read in a whole file into an array of lines my @lines = read_file( &#39;filename&#39; ) ;</p>

<p># write out a whole file from a scalar write_file( &#39;filename&#39;, $text ) ;</p>

<p># write out a whole file from an array of lines write_file( &#39;filename&#39;, @lines ) ;</p>

<p># Here is a simple and fast way to load and save a simple config file # made of key=value lines. my %conf = read_file( $file_name ) =~ /^(\w+)=(.*)$/mg ; write_file( $file_name, {atomic =&#62; 1}, map &#34;$_=$conf{$_}\n&#34;, keys %conf ) ;</p>

<p># insert text at the beginning of a file prepend_file( &#39;filename&#39;, $text ) ;</p>

<p># in-place edit to replace all &#39;foo&#39; with &#39;bar&#39; in file edit_file { s/foo/bar/g } &#39;filename&#39; ;</p>

<p># in-place edit to delete all lines with &#39;foo&#39; from file edit_file_lines sub { $_ = &#39;&#39; if /foo/ }, &#39;filename&#39; ;</p>

<p># read in a whole directory of file names (skipping . and ..) my @files = read_dir( &#39;/path/to/dir&#39; ) ;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>This module provides subs that allow you to read or write entire files with one simple call. They are designed to be simple to use, have flexible ways to pass in or get the file contents and to be very efficient. There is also a sub to read in all the files in a directory other than <code>.</code> and <code>..</code></p>

<p>These slurp/spew subs work for files, pipes and sockets, stdio, pseudo-files, and the DATA handle. Read more about why slurping files is a good thing in the file &#39;slurp_article.pod&#39; in the extras/ directory.</p>

<p>If you are interested in how fast these calls work, check out the slurp_bench.pl program in the extras/ directory. It compares many different forms of slurping. You can select the I/O direction, context and file sizes. Use the --help option to see how to run it.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="read_file"
><b>read_file</b></a></h2>

<p>This sub reads in an entire file and returns its contents to the caller. In scalar context it returns the entire file as a single scalar. In list context it will return a list of lines (using the current value of $/ as the separator including support for paragraph mode when it is set to &#39;&#39;).</p>

<pre class="sh_perl">  my $text = read_file( &#39;filename&#39; ) ;
  my $bin = read_file( &#39;filename&#39; { binmode =&#62; &#39;:raw&#39; } ) ;
  my @lines = read_file( &#39;filename&#39; ) ;
  my $lines = read_file( &#39;filename&#39;, array_ref =&#62; 1 ) ;</pre>

<p>The first argument is the file to slurp in. If the next argument is a hash reference, then it is used as the options. Otherwise the rest of the argument list are is used as key/value options.</p>

<p>If the file argument is a handle (if it is a ref and is an IO or GLOB object), then that handle is slurped in. This mode is supported so you slurp handles such as <code>DATA</code> and <code>STDIN</code>. See the test handle.t for an example that does <code>open( &#39;-|&#39; )</code> and the child process spews data to the parant which slurps it in. All of the options that control how the data is returned to the caller still work in this case.</p>

<p>If the first argument is an overloaded object then its stringified value is used for the filename and that file is opened. This is a new feature in 9999.14. See the stringify.t test for an example.</p>

<p>By default <code>read_file</code> returns an undef in scalar contex or a single undef in list context if it encounters an error. Those are both impossible to get with a clean read_file call which means you can check the return value and always know if you had an error. You can change how errors are handled with the <code>err_mode</code> option.</p>

<p>Speed Note: If you call read_file and just get a scalar return value it is now optimized to handle shorter files. This is only used if no options are used, the file is shorter then 100k bytes, the filename is a plain scalar and a scalar file is returned. If you want the fastest slurping, use the <code>buf_ref</code> or <code>scalar_ref</code> options (see below)</p>

<p>NOTE: as of version 9999.06, read_file works correctly on the <code>DATA</code> handle. It used to need a sysseek workaround but that is now handled when needed by the module itself.</p>

<p>You can optionally request that <code>slurp()</code> is exported to your code. This is an alias for read_file and is meant to be forward compatible with Perl 6 (which will have slurp() built-in).</p>

<p>The options for <code>read_file</code> are:</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="binmode"
>binmode</a></h3>

<p>If you set the binmode option, then its value is passed to a call to binmode on the opened handle. You can use this to set the file to be read in binary mode, utf8, etc. See perldoc -f binmode for more.</p>

<pre class="sh_perl">        my $bin_data = read_file( $bin_file, binmode =&#62; &#39;:raw&#39; ) ;
        my $utf_text = read_file( $bin_file, binmode =&#62; &#39;:utf8&#39; ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="array_ref"
>array_ref</a></h3>

<p>If this boolean option is set, the return value (only in scalar context) will be an array reference which contains the lines of the slurped file. The following two calls are equivalent:</p>

<pre class="sh_perl">        my $lines_ref = read_file( $bin_file, array_ref =&#62; 1 ) ;
        my $lines_ref = [ read_file( $bin_file ) ] ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="chomp"
>chomp</a></h3>

<p>If this boolean option is set, the lines are chomped. This only happens if you are slurping in a list context or using the <code>array_ref</code> option.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="scalar_ref"
>scalar_ref</a></h3>

<p>If this boolean option is set, the return value (only in scalar context) will be an scalar reference to a string which is the contents of the slurped file. This will usually be faster than returning the plain scalar. It will also save memory as it will not make a copy of the file to return. Run the extras/slurp_bench.pl script to see speed comparisons.</p>

<pre class="sh_perl">        my $text_ref = read_file( $bin_file, scalar_ref =&#62; 1 ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="buf_ref"
>buf_ref</a></h3>

<p>You can use this option to pass in a scalar reference and the slurped file contents will be stored in the scalar. This can be used in conjunction with any of the other options. This saves an extra copy of the slurped file and can lower ram usage vs returning the file. It is usually the fastest way to read a file into a scalar. Run the extras/slurp_bench.pl script to see speed comparisons.</p>

<pre class="sh_perl">        read_file( $bin_file, buf_ref =&#62; \$buffer ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="blk_size"
>blk_size</a></h3>

<p>You can use this option to set the block size used when slurping from an already open handle (like \*STDIN). It defaults to 1MB.</p>

<pre class="sh_perl">        my $text_ref = read_file( $bin_file, blk_size =&#62; 10_000_000,
                                             array_ref =&#62; 1 ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="err_mode"
>err_mode</a></h3>

<p>You can use this option to control how read_file behaves when an error occurs. This option defaults to &#39;croak&#39;. You can set it to &#39;carp&#39; or to &#39;quiet to have no special error handling. This code wants to carp and then read another file if it fails.</p>

<pre class="sh_perl">        my $text_ref = read_file( $file, err_mode =&#62; &#39;carp&#39; ) ;
        unless ( $text_ref ) {

                # read a different file but croak if not found
                $text_ref = read_file( $another_file ) ;
        }
        
        # process ${$text_ref}</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="write_file"
><b>write_file</b></a></h2>

<p>This sub writes out an entire file in one call.</p>

<pre class="sh_perl">  write_file( &#39;filename&#39;, @data ) ;</pre>

<p>The first argument to <code>write_file</code> is the filename. The next argument is an optional hash reference and it contains key/values that can modify the behavior of <code>write_file</code>. The rest of the argument list is the data to be written to the file.</p>

<pre class="sh_perl">  write_file( &#39;filename&#39;, {append =&#62; 1 }, @data ) ;
  write_file( &#39;filename&#39;, {binmode =&#62; &#39;:raw&#39;}, $buffer ) ;</pre>

<p>As a shortcut if the first data argument is a scalar or array reference, it is used as the only data to be written to the file. Any following arguments in @_ are ignored. This is a faster way to pass in the output to be written to the file and is equivalent to the <code>buf_ref</code> option of <code>read_file</code>. These following pairs are equivalent but the pass by reference call will be faster in most cases (especially with larger files).</p>

<pre class="sh_perl">  write_file( &#39;filename&#39;, \$buffer ) ;
  write_file( &#39;filename&#39;, $buffer ) ;

  write_file( &#39;filename&#39;, \@lines ) ;
  write_file( &#39;filename&#39;, @lines ) ;</pre>

<p>If the first argument is a handle (if it is a ref and is an IO or GLOB object), then that handle is written to. This mode is supported so you spew to handles such as \*STDOUT. See the test handle.t for an example that does <code>open( &#39;-|&#39; )</code> and child process spews data to the parent which slurps it in. All of the options that control how the data are passed into <code>write_file</code> still work in this case.</p>

<p>If the first argument is an overloaded object then its stringified value is used for the filename and that file is opened. This is new feature in 9999.14. See the stringify.t test for an example.</p>

<p>By default <code>write_file</code> returns 1 upon successfully writing the file or undef if it encountered an error. You can change how errors are handled with the <code>err_mode</code> option.</p>

<p>The options are:</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="binmode"
>binmode</a></h3>

<p>If you set the binmode option, then its value is passed to a call to binmode on the opened handle. You can use this to set the file to be read in binary mode, utf8, etc. See perldoc -f binmode for more.</p>

<pre class="sh_perl">        write_file( $bin_file, {binmode =&#62; &#39;:raw&#39;}, @data ) ;
        write_file( $bin_file, {binmode =&#62; &#39;:utf8&#39;}, $utf_text ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="perms"
>perms</a></h3>

<p>The perms option sets the permissions of newly-created files. This value is modified by your process&#39;s umask and defaults to 0666 (same as sysopen).</p>

<p>NOTE: this option is new as of File::Slurp version 9999.14;</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="buf_ref"
>buf_ref</a></h3>

<p>You can use this option to pass in a scalar reference which has the data to be written. If this is set then any data arguments (including the scalar reference shortcut) in @_ will be ignored. These are equivalent:</p>

<pre class="sh_perl">        write_file( $bin_file, { buf_ref =&#62; \$buffer } ) ;
        write_file( $bin_file, \$buffer ) ;
        write_file( $bin_file, $buffer ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="atomic"
>atomic</a></h3>

<p>If you set this boolean option, the file will be written to in an atomic fashion. A temporary file name is created by appending the pid ($$) to the file name argument and that file is spewed to. After the file is closed it is renamed to the original file name (and rename is an atomic operation on most OS&#39;s). If the program using this were to crash in the middle of this, then the file with the pid suffix could be left behind.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="append"
>append</a></h3>

<p>If you set this boolean option, the data will be written at the end of the current file. Internally this sets the sysopen mode flag O_APPEND.</p>

<pre class="sh_perl">        write_file( $file, {append =&#62; 1}, @data ) ;

 You
can import append_file and it does the same thing.</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="no_clobber"
>no_clobber</a></h3>

<p>If you set this boolean option, an existing file will not be overwritten.</p>

<pre class="sh_perl">        write_file( $file, {no_clobber =&#62; 1}, @data ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="err_mode"
>err_mode</a></h3>

<p>You can use this option to control how <code>write_file</code> behaves when an error occurs. This option defaults to &#39;croak&#39;. You can set it to &#39;carp&#39; or to &#39;quiet&#39; to have no error handling other than the return value. If the first call to <code>write_file</code> fails it will carp and then write to another file. If the second call to <code>write_file</code> fails, it will croak.</p>

<pre class="sh_perl">        unless ( write_file( $file, { err_mode =&#62; &#39;carp&#39;, \$data ) ;

                # write a different file but croak if not found
                write_file( $other_file, \$data ) ;
        }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="overwrite_file"
>overwrite_file</a></h2>

<p>This sub is just a typeglob alias to write_file since write_file always overwrites an existing file. This sub is supported for backwards compatibility with the original version of this module. See write_file for its API and behavior.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="append_file"
>append_file</a></h2>

<p>This sub will write its data to the end of the file. It is a wrapper around write_file and it has the same API so see that for the full documentation. These calls are equivalent:</p>

<pre class="sh_perl">        append_file( $file, @data ) ;
        write_file( $file, {append =&#62; 1}, @data ) ;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="prepend_file"
>prepend_file</a></h2>

<p>This sub writes data to the beginning of a file. The previously existing data is written after that so the effect is prepending data in front of a file. It is a counterpart to the append_file sub in this module. It works by first using <code>read_file</code> to slurp in the file and then calling <code>write_file</code> with the new data and the existing file data.</p>

<p>The first argument to <code>prepend_file</code> is the filename. The next argument is an optional hash reference and it contains key/values that can modify the behavior of <code>prepend_file</code>. The rest of the argument list is the data to be written to the file and that is passed to <code>write_file</code> as is (see that for allowed data).</p>

<p>Only the <code>binmode</code> and <code>err_mode</code> options are supported. The <code>write_file</code> call has the <code>atomic</code> option set so you will always have a consistant file. See above for more about those options.</p>

<p><code>prepend_file</code> is not exported by default, you need to import it explicitly.</p>

<pre class="sh_perl">        use File::Slurp qw( prepend_file ) ;
        prepend_file( $file, $header ) ;
        prepend_file( $file, \@lines ) ;
        prepend_file( $file, { binmode =&#62; &#39;raw:&#39;}, $bin_data ) ;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="edit_file,_edit_file_lines"
>edit_file, edit_file_lines</a></h2>

<p>These subs read in a file into $_, execute a code block which should modify $_ and then write $_ back to the file. The difference between them is that <code>edit_file</code> reads the whole file into $_ and calls the code block one time. With <code>edit_file_lines</code> each line is read into $_ and the code is called for each line. In both cases the code should modify $_ if desired and it will be written back out. These subs are the equivalent of the -pi command line options of Perl but you can call them from inside your program and not fork out a process. They are in @EXPORT_OK so you need to request them to be imported on the use line or you can import both of them with:</p>

<pre class="sh_perl">        use File::Slurp qw( :edit ) ;</pre>

<p>The first argument to <code>edit_file</code> and <code>edit_file_lines</code> is a code block or a code reference. The code block is not followed by a comma (as with grep and map) but a code reference is followed by a comma. See the examples below for both styles. The next argument is the filename. The last argument is an optional hash reference and it contains key/values that can modify the behavior of <code>prepend_file</code>.</p>

<p>Only the <code>binmode</code> and <code>err_mode</code> options are supported. The <code>write_file</code> call has the <code>atomic</code> option set so you will always have a consistant file. See above for more about those options.</p>

<p>Each group of calls below show a Perl command line instance and the equivalent calls to <code>edit_file</code> and <code>edit_file_lines</code>.</p>

<pre class="sh_perl">        perl -0777 -pi -e &#39;s/foo/bar/g&#39; filename
        use File::Slurp qw( edit_file ) ;
        edit_file { s/foo/bar/g } &#39;filename&#39; ;
        edit_file sub { s/foo/bar/g }, &#39;filename&#39; ;
        edit_file \&#38;replace_foo, &#39;filename&#39; ;
        sub replace_foo { s/foo/bar/g }

        perl -pi -e &#39;$_ = &#34;&#34; if /foo/&#39; filename
        use File::Slurp qw( edit_file_lines ) ;
        use File::Slurp ;
        edit_file_lines { $_ = &#39;&#39; if /foo/ } &#39;filename&#39; ;
        edit_file_lines sub { $_ = &#39;&#39; if /foo/ }, &#39;filename&#39; ;
        edit_file \&#38;delete_foo, &#39;filename&#39; ;
        sub delete_foo { $_ = &#39;&#39; if /foo/ }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="read_dir"
>read_dir</a></h2>

<p>This sub reads all the file names from directory and returns them to the caller but <code>.</code> and <code>..</code> are removed by default.</p>

<pre class="sh_perl">        my @files = read_dir( &#39;/path/to/dir&#39; ) ;</pre>

<p>The first argument is the path to the directory to read. If the next argument is a hash reference, then it is used as the options. Otherwise the rest of the argument list are is used as key/value options.</p>

<p>In list context <code>read_dir</code> returns a list of the entries in the directory. In a scalar context it returns an array reference which has the entries.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="err_mode"
>err_mode</a></h3>

<p>If the <code>err_mode</code> option is set, it selects how errors are handled (see <code>err_mode</code> in <code>read_file</code> or <code>write_file</code>).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="keep_dot_dot"
>keep_dot_dot</a></h3>

<p>If this boolean option is set, <code>.</code> and <code>..</code> are not removed from the list of files.</p>

<pre class="sh_perl">        my @all_files = read_dir( &#39;/path/to/dir&#39;, keep_dot_dot =&#62; 1 ) ;</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="prefix"
>prefix</a></h3>

<p>If this boolean option is set, the string &#34;$dir/&#34; is prefixed to each dir entry. This means you can directly use the results to open files. A common newbie mistake is not putting the directory in front of entries when opening themn.</p>

<pre class="sh_perl">        my @paths = read_dir( &#39;/path/to/dir&#39;, prefix =&#62; 1 ) ;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="EXPORT"
>EXPORT</a></h2>

<pre class="sh_perl">  These are exported by default or with
        use File::Slurp qw( :std ) ;

  read_file write_file overwrite_file append_file read_dir

  These are exported with
        use File::Slurp qw( :edit ) ;

  edit_file edit_file_lines

  You can get all subs in the module exported with 
        use File::Slurp qw( :all ) ;</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="LICENSE"
>LICENSE</a></h2>

<pre class="sh_perl">  Same as Perl.</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h2>

<p>An article on file slurping in extras/slurp_article.pod. There is also a benchmarking script in extras/slurp_bench.pl.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h2>

<p>If run under Perl 5.004, slurping from the DATA handle will fail as that requires B.pm which didn&#39;t get into core until 5.005.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR <img alt='^' src='http://st.pimg.net/tucs/img/up.gif'></a></h1>

<p>Uri Guttman, &#60;uri AT stemsystems DOT com&#62;</p>

</div>
<!-- This should probably be put in the <div class="footer"></div> -->
<script type="text/javascript">
    $(document).ready(function(){
        var startingStyle = $.cookie('css') ? $.cookie('css') : 'http://st.pimg.net/tucs/css/sh_none.min.css';
        $.fn.styleSwitch(startingStyle);
        $("#styleswitch").val(startingStyle);
        sh_highlightDocument();
        $("#styleswitch").bind(($.browser.msie ? "click" : "change"), function() {
            $.fn.styleSwitch($(this).val());
        });
    });
</script>
<div class="styleswitch">
    syntax highlighting:
    <select id="styleswitch">
        <option value="http://st.pimg.net/tucs/css/sh_none.min.css">no syntax highlighting</option>
        <option value="http://st.pimg.net/tucs/css/sh_acid.min.css">acid</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-dark.min.css">berries-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_berries-light.min.css">berries-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_bipolar.min.css">bipolar</option>
        <option value="http://st.pimg.net/tucs/css/sh_blacknblue.min.css">blacknblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_bright.min.css">bright</option>
        <option value="http://st.pimg.net/tucs/css/sh_contrast.min.css">contrast</option>
        <option value="http://st.pimg.net/tucs/css/sh_cpan.min.css">cpan</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkblue.min.css">darkblue</option>
        <option value="http://st.pimg.net/tucs/css/sh_darkness.min.css">darkness</option>
        <option value="http://st.pimg.net/tucs/css/sh_desert.min.css">desert</option>
        <option value="http://st.pimg.net/tucs/css/sh_dull.min.css">dull</option>
        <option value="http://st.pimg.net/tucs/css/sh_easter.min.css">easter</option>
        <option value="http://st.pimg.net/tucs/css/sh_emacs.min.css">emacs</option>
        <option value="http://st.pimg.net/tucs/css/sh_golden.min.css">golden</option>
        <option value="http://st.pimg.net/tucs/css/sh_greenlcd.min.css">greenlcd</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-anjuta.min.css">ide-anjuta</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-codewarrior.min.css">ide-codewarrior</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-devcpp.min.css">ide-devcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-eclipse.min.css">ide-eclipse</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-kdev.min.css">ide-kdev</option>
        <option value="http://st.pimg.net/tucs/css/sh_ide-msvcpp.min.css">ide-msvcpp</option>
        <option value="http://st.pimg.net/tucs/css/sh_kwrite.min.css">kwrite</option>
        <option value="http://st.pimg.net/tucs/css/sh_matlab.min.css">matlab</option>
        <option value="http://st.pimg.net/tucs/css/sh_navy.min.css">navy</option>
        <option value="http://st.pimg.net/tucs/css/sh_nedit.min.css">nedit</option>
        <option value="http://st.pimg.net/tucs/css/sh_neon.min.css">neon</option>
        <option value="http://st.pimg.net/tucs/css/sh_night.min.css">night</option>
        <option value="http://st.pimg.net/tucs/css/sh_pablo.min.css">pablo</option>
        <option value="http://st.pimg.net/tucs/css/sh_peachpuff.min.css">peachpuff</option>
        <option value="http://st.pimg.net/tucs/css/sh_print.min.css">print</option>
        <option value="http://st.pimg.net/tucs/css/sh_rand01.min.css">rand01</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-dark.min.css">solarized-dark</option>
	<option value="http://st.pimg.net/tucs/css/sh_solarized-light.min.css">solarized-light</option>
        <option value="http://st.pimg.net/tucs/css/sh_style.min.css">style</option>
        <option value="http://st.pimg.net/tucs/css/sh_the.min.css">the</option>
        <option value="http://st.pimg.net/tucs/css/sh_typical.min.css">typical</option>
        <option value="http://st.pimg.net/tucs/css/sh_vampire.min.css">vampire</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim-dark.min.css">vim-dark</option>
        <option value="http://st.pimg.net/tucs/css/sh_vim.min.css">vim</option>
        <option value="http://st.pimg.net/tucs/css/sh_whatis.min.css">whatis</option>
        <option value="http://st.pimg.net/tucs/css/sh_whitengrey.min.css">whitengrey</option>
        <option value="http://st.pimg.net/tucs/css/sh_zellner.min.css">zellner</option>
    </select>
</div>



<div class="footer"><div class="cpanstats">78275 Uploads, 24724 Distributions
106002 Modules, 9649 Uploaders
</div>
hosted by <a href="http://www.yellowbot.com">YellowBot</a><br/>
<a href="http://www.yellowbot.com"><img alt="do. tag. write. share." src="http://st.pimg.net/tucs/img/yellowbot_logo.gif"></a>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://ipv4.v6test.develooper.com/js/v1/v6test.js"></script>

<script type="text/javascript">
   // v6.target = '';
   if (!v6.target) { v6.only_once = true }
   v6.site = '7A0D89A6-2B82-11DF-B9DA-F61CBD13F020';
   v6.api_server = 'http://ipv4.v6test.develooper.com';
   try {
     v6.test();
   } catch(err) {}
</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("a[href^=http:]").click(function(){
      var href = $(this).attr('href');
      var m = href.match('\/\/([^\/:]+)');
      _gaq.push(['_trackEvent','External',m[1],'Module']);
    });
    $("a[href^=/CPAN/]").click(function(){
      var href = $(this).attr('href');
      _gaq.push(['_trackEvent','Download',href,'Module']);
    });
  });
</script>
<!-- Sat Apr 28 01:49:05 2012 GMT (0.0609312057495117) @cpansearch1 -->
 </body>
</html>
